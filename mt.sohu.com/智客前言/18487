➜华云大咖说丨安超云套件Archer Cloudsuite 介绍
http://www.sohu.com/a/412920353_99933683	20805
<p class="ql-align-center"><img src="http://p3.itc.cn/images01/20200813/23f4e54470464d51a6eeefd77d02b17f.jpeg" max-width="600" /></p>
<p>随着企业上云如火如荼的展开，企业用户对于公有云、私有云以及多云/混合云等不同形式的云服务正呈现着多样化的应用需求。尤其是在云咨询、迁移实施、增值开发、运维服务等很多环节当中，云管理正在发挥着重要的作用。</p>
<p>华云数据作为云计算独角兽，为帮助政企用户实现全面云化，继2019年发布国产通用型云操作系统安超OS后，又于2020年推出了安超云套件 Archer Cloudsuite。安超云套件Archer Cloudsuite 定位为安超 OS 2020的超融合功能增强套件，能够有效提升运维效率，降低整体运维成本。</p>
<p>本期大咖说，特别邀请到华云数据产品营销经理魏显巍为大家带来“安超云套件Archer Cloudsuite 介绍”。</p>
<p>精彩观点</p>
<p>1. 如今，企业对混合云管理的需求包括：大型的企业IT数据中心，支撑较多的业务系统，业务资源统一呈现；系统异构性较大，有多种类型服务器、存储、网络，并部署了多种虚拟化平台，如VMware虚拟化等；实施了多种云平台架构，需要进行资源与业务统一管理；多个部门IT平台各自为政，需要统一资源与业务呈现集中管理；业务分别部署在公有云和本次IT平台，需要将业务打通，IT资源统一管理。</p>
<p>2. 安超云套件 Archer CloudSuite在安超OS 2020云操作系统的基础上增加多群集管理、流程审批、虚拟数据中心（VDC）、组织架构管理、集群统一监控告警等功能，并通过统一运维管理平台，提供全平台的监控保障能力，满足中小企业数据中心的超融合场景的需求，为传统企业IT管理精细化转变提供基础支撑。</p>
<p>3. 安超云套件 Archer CloudSuite的功能包括：多集群安超的纳管、VDC与项目管理、业务流管理、纳管异构私有云、多集群的监控管理、全局软件定义网络、增强角色权限模型。</p>
<p>4. 针对虚拟数据中心管理，安超云套件 Archer CloudSuite可根据业务需要划分VDC，例如，按多个子公司划分，或按研发环境和生产环境划分等；每个VDC可以指定一个或多个管理员，VDC管理员可以管理本级VDC内以及子VDC的资源和用户；VDC下可按照业务系统或IT项目创建项目，以项目为单位开通和管理云资源；通过资源配额限制和工作流审批两种方式管控资源，防止资源过度使用。</p>            <div class="lookall-box">
<div class="lookall-shadow"></div>
<section class="lookall">
<a href="javascript:;" class="show-all" id="showMore">
<em>展开全文</em>
</a>
</section>
</div>
<div class="hidden-content control-hide">
<p>5. 针对业务流管理，在安超云套件 Archer Cloudsuite中，管理员可以根据业务需求，创建审批流程。如果存在多次审批的情况，可以在创建审批流程时设置多个审批环节，每个环节可以指定审批人，灵活满足各种业务审批场景。</p>
<p>6. 针对运维管理平台，安超云套件 Archer Cloudsuite可以按需定制物理资源/虚拟资源/服务的监控项；自定义告警模板/策略/规则，提供对所纳管集群的物理节点、虚拟机、Openstack服务、物理交换机、分布式存储等对象配置监控告警策略；策略可按告警模板、告警联系人、监控对象制定，不同告警策略应用不同通知对象；分析优化：提供告警统计，利于了解告警频发根源、团队运维效率等。</p>
<p>7. 安超云套件 Archer Cloudsuite还十分重视平台安全，对平台登陆进行安全加固。比如：支持配置短信服务网关，开启短信验证功能后，所有用户登录平台均需提交短信验证码；支持自定义密码有效期，到期后用户需重设密码；支持“强密码”配置规则，开启后新设密码必须同时包含英文大、小写、数字和特殊字符；支持自定义密码重试次数上限，超过即触发锁定；支持配置登录IP段白名单，非白名单内的IP禁止登录平台；可配置禁止多会话连接，开启个单个账号仅支持一个会话连接；新增登录日志，记录每个账号的登录事件。同时记录登录IP，便于溯源。</p>
<p>8. 安超云套件Archer Cloudsuite的应用场景包括超融合场景、私有云场景、混合云场景。在超融合场景中，场景功能需求会大于多集群多租户的需求，安超云套件 Archer Cloudsuite在中小企业数据中心存在需求场景：（1）、扩展超融合单集群最佳实践的限制；（2）、按需划分集群，如测试与生产/生产与备份/新旧服务器集群划分等；（3）、按需划分资源配额，如财务与业务部门/生产与备份/项目与预留资源配额等。</p>
<p>9. 在私有云场景中，场景功能需求会大于多集群纳管户的需求，在企业多集群数据中心存在需求场景：（1）多个集群，规模可扩展至上百台；（2）有异构资源池的需求；（3）应用在集中式的数据中心。</p>
<p>10. 在销售场景中，随着业务增多管理变得复杂，客户不仅希望能够控制预算，还要把管理分解下沉给各部门的管理人员，减小信息中心的压力。同时，要求原VMware环境与新环境要支持统一管理，VMware环境运行的业务在资源不够时能够借用新集群里的资源。华云数据安超云套件Archer Cloudsuite与其他同类型产品相比，价格低，能够满足多租户管理功能需求、异构私有云纳管需求、全局网络功能需求。并且随着产品的迭代，还将提供更多服务。</p>
➜智汇华云 | OpenStack 虚拟机 GPU 性能优化
http://www.sohu.com/a/412920646_99933683	20828
<p class="ql-align-center"><img src="http://p6.itc.cn/images01/20200813/095080e87fe847648d2d85b57a36246a.jpeg" max-width="600" /></p>
<p>随着大数据、人工智能技术的发展，越来越多的用户产生了获取拥有GPU算力的弹性计算服务的需求，GPU云主机具有突出的图形处理和高性能计算能力，适用于科学计算、视频处理、深度学习等应用场景，受到了市场的青睐。</p>
<p>本期智汇华云，特别邀请到华云数据OpenStack开发工程师傅成超为大家带来“OpenStack 虚拟机 GPU 性能优化”。</p>
<p>首先为大家简单介绍一下 NUMA 的概念。NUMA 是一种解决多 CPU 工作的技术方案，在此之前，市面上主要采用 SMP 和 MPP 两种架构。</p>
<p>SMP 技术</p>
<p>计算机技术发展初期，服务器都是单 CPU 结构，随着技术的不断发展，多 CPU 结构开始流行起来，为了满足多 CPU 共同工作的需求，SMP 技术应运而生。</p>
<p class="ql-align-center"><img src="http://p0.itc.cn/images01/20200813/876e7d525c3442a09c9c2ea2d5c4abb1.jpeg" max-width="600" /></p>
<p>如图所示，多个 CPU 通过一个总线访问存储器，因此无论在什么时候，处理器只能为内存的每个数据保持或共享唯一一个数值。</p>            <div class="lookall-box">
<div class="lookall-shadow"></div>
<section class="lookall">
<a href="javascript:;" class="show-all" id="showMore">
<em>展开全文</em>
</a>
</section>
</div>
<div class="hidden-content control-hide">
<p>SMP 的缺点是十分明显的，即扩展性有限，因此在存储接口达到饱和的时候，增加处理器的数量并不能获得更高的性能，因此 SMP 架构支持的 CPU 数量十分有限。</p>
<p>MPP 技术</p>
<p>MPP 则是一种分布式存储器模式，它能将更多的处理器纳入一个系统的存储器。一个分布式存储器具有多个节点，每个节点都有自己的存储器，单个节点相互连接形成了一个总系统。MPP 可以近似理解为一个 SMP 的横向扩展集群。</p>
<p>NUMA 技术</p>
<p>NUMA 是目前最常用的技术，在 NUMA体系中每个处理器都有自己的存储器，同时，每个处理器也可以访问其他处理器的存储器。</p>
<p class="ql-align-center"><img src="http://p3.itc.cn/images01/20200813/ef3ec30e938d45ed8b9c3cb9987d1402.jpeg" max-width="600" /></p>
<p>下图为多核 NUMA CPU 架构</p>
<p class="ql-align-center"><img src="http://p0.itc.cn/images01/20200813/7028b8cd71064e62a6dc3f8aacfccda0.jpeg" max-width="600" /></p>
<p>如上文所说，每个处理器既可以访问自己的存储器，也可以访问其他处理器的存储器，事实上，前者的速度要比后者最高快到100倍之多。在 Linux 中，系统默认采用自动 NUMA 平衡策略，所以 NUMA 调优的目的就是让处理器尽可能地访问自己的存储器，以提高计算速度。</p>
<p>在 OpenStack 中，可以采用 virsh numatune 命令查看和修改虚拟机的 NUMA 配置，反映在 XML 文件上的便是和 &lt; numatune &gt; 中的 id 保持一致。</p>
<p>那么在 GPU 云主机中，是否可以采用相同的思路进行性能调优呢？答案自然是肯定的。</p>
<p>在进行 GPU 性能优化前，我们还需要进一步了解一下 render-nodes 的概念。</p>
<p>render-nodes 是一种用于访问具有 DRI 能力的 GPU 非特权功能的 DRM 接口，在 Linux 内核中，DRM 驱动程序通过 render-node 接口公开其用户空间 API 的非特权部分，并作为一个单独的设备文件 (/dev/dri/renderDXX) 存在。信息技术变革日新月异，如今，客户端已不再需要运行合成器或图形服务器来使用 GPU ，通过 render-node 即可实现对 GPU 资源的访问。</p>
<p>将 render-node 和所在的 NUMA 绑定，可以有效防止跨片 PCIE 访问带来的性能损耗。</p>
<p>通过 lspci –vvvs bus_id 命令便可查看 GPU 所在的 NUMA 节点，即 /dev/dri/renderDXX 与 NUMA 的对应关系。以我本机为例，renderD128 对应 NUMA 0，renderD129 对应 NUMA 1，此时我们便可以使用 numactl 进行绑定。</p>
<p>然而在一个 OpenStack 云环境中可能会运行着成百上千的云主机，云主机创建完成后逐一进行手动绑定明显不是一个现实的方案，此时可以通过修改 /nova/virt/libvirt/driver.py中的相关逻辑。当程序获取到 vcpu 被分配的 NUMA 节点后，通过设备之间的映射关系，在添加 GPU 设备阶段为其绑定对应的 render-node。这样虚拟机在创建之初便拥有了卓越的性能，无需后期进行人工绑定。</p>
<p>结束语</p>
<p>本文从 NUMA 出发，为大家简单介绍了多 CPU 的常用技术架构，并以此为延伸，分享了 GPU 虚拟机的性能调优方案。目前，华云数据公有云产品线中已经包含具有超强计算能力的 GPU 型云主机，在新基建的风口，推动中国企业全面上云，助力客户实现数字化转型。</p>