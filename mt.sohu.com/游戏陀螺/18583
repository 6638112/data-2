➜【干货分享】《秦时明月世界》手游如何用Unity定制化渲染管线？
http://www.sohu.com/a/432517892_204728	55930
<p><span style="font-size: 16px;">11月16日晚，主题为“创新思，享未来”的中国Unity线上技术大会正式拉开帷幕。会上，腾讯魔方工作室高级工程师王毅以“《秦时明月世界》手游的定制渲染管线”为主题发表演讲，介绍了《秦时明月世界》手游如何借助Unity实现定制渲染管线技术，具体包括相机与颜色空间、深度图、Grab Pass、后处理和多光源几个方面。</span></p>
<p><span><strong>以下是演讲内容（有节选）：</strong></span></p>
<p><span style="font-size: 16px;">大家好！我是来自于腾讯魔方工作室的王毅。今天为大家分享的是《秦时明月世界》手游的定制渲染管线。</span></p>
<p style="text-align: center;"><img src="http://p7.itc.cn/q_70/images03/20201118/09a209dcce6e4bada2de054f948c7907.png" /></p>
<p><span style="font-size: 16px;">《秦时明月世界》手游是一款大型MMO手游。首先给大家展示一下游戏中残月谷的一段关卡战斗，整个战斗过程结合Unity的TimeLine，我们做到了一镜到底，无缝切换的战斗和动画的表现形式。</span></p>
<p style="text-align: center;"><img src="http://p6.itc.cn/q_70/images03/20201118/e89ac71b2eba4ada89d4d79386f4c015.png" /></p>
<p><span style="font-size: 16px;">今天主要是给大家带来《秦时明月世界》定制化渲染管线技术相关的一些介绍。主要分几个维度，包括 <strong>相机与颜色空间、深度图、Grab Pass、后处理和多光源</strong>这几项。 </span></p>
<p style="text-align: center;"><img src="http://p2.itc.cn/q_70/images03/20201118/1a72302db71c45b9b6cb244c294581d4.png" /></p>            <div class="lookall-box">
<div class="lookall-shadow"></div>
<section class="lookall">
<a href="javascript:;" class="show-all" id="showMore">
<em>展开全文</em>
</a>
</section>
</div>
<div class="hidden-content control-hide">
<p><span style="font-size: 16px;">《秦时明月世界》中基于 <strong>相机和颜色空间表现</strong>的准备工作,主要是分辨率的分离，UI高清，场景动态，平衡效果与效率。 </span></p>
<p><span style="font-size: 16px;">我们在整个3D游戏世界中，经常会基于PBR的高清的线性空间制作，但是常规的UI美术平时习惯于在Gamma空间工作，导致两边的工作流程有一些冲突。UI的美术不太适应线性空间的流程，也不太适用线性空间下的颜色在他们的自产工具里制作。</span></p>
<p><span style="font-size: 16px;">但是，我们游戏中要使用在线性空间下的流程。为了他们的统一，我们会 <strong>将分辨力进行分离，把UI进行高清的分辨率显示，场景进行动态控制，场景中使用线性空间的流程，UI使用Gamma空间的流程进行绘制，这样就可以保证场景基于不同的机型、不同的表现形式进行一个动态分辨率的调整，保证UI的高清化。</strong>同时也使UI的资产可以在Gamma空间下进行正确的显示，保证游戏中场景的线性空间的显示和UI的Gamma空间的显示可以在一个正确的流程下工作。 </span></p>
<p><span style="font-size: 16px;">我们的过程就是场景中使用一个线性空间的表现形式，它有单独的相机区进行绘制，同时在与UI相机进行blender，输出到屏幕上。然后场景空间的相机进行Gamma校正，而UI本身就是在Gamma空间的流程进行工作的，所以它不需要Gamma校正。</span></p>
<p style="text-align: center;"><img src="http://p9.itc.cn/q_70/images03/20201118/44c583f0976a4dc3bc8eb52d9d24719f.png" /></p>
<p><span style="font-size: 16px;">接下来再说一下我们基于 <strong>深度图</strong>的改造。 </span></p>
<p><span style="font-size: 16px;">Unity为我们提供了深度Pass这个过程，帮助开发者可以在游戏项目中快速的某一阶段获取深度图来进行绘制及采样深度进行渲染。</span></p>
<p><span style="font-size: 16px;">《秦时明月世界》进行了定制化的改造，在非透明物体中如果需要使用深度图，就会采用深度Pass这种方式去获取深度图，如果在非透明的物体下不需要使用深度图，我们就会 <strong>采用深度图获取的方式，直接从深度Buffer中拷贝出来深度图进行使用，这样可以有效地减少额外的DC造成的渲染消耗</strong>， <strong>尤其是对一些低端手机或者是对于DC特别敏感的手机来讲，这种使用方式效率会更高。</strong>结合这两种方式，我们就会更高效地使用Unity的深度图。 </span></p>
<p><span style="font-size: 16px;">我们在Unity的PC版、Unity的Editor，包括iOS版本都会使用翻转的Depth这种结构来表示深度Buffer，但是在安卓平台，由于OpenGL ES的限制，并没有使用这种方式。为了统一这个方式，我们进行了改造，在安卓平台也使用深度翻转的这部分使用深度Buffer。</span></p>
<p><span style="font-size: 16px;">主要原因在于，我们的美术，尤其是关卡设计师和模型师在进行关卡设计和资产设计的时候，他们基本上是在PC平台或者是在非移动端进行关卡的组合以及关卡的布置，这样往往会出现一些因为经度问题，导致关卡进入到实际的手机或者是移动端的版本上，尤其是安卓的平台，由于精度的问题，会出现一些关卡上显示的瑕疵。这个时候美术师或者是关卡设计师就需要反复调整关卡的结构，来保证显示效果的正确，相对来讲是一个漫长耗时的过程，因为移动端要涉及手机端的APK的打包，这些过程都会影响到整个关卡制作的进度。</span></p>
<p><span style="font-size: 16px;">为了统一这个方法，我们就 <strong>在安卓端也使用了深度翻转的技术，保证和在PC端以及iOS端使用相同的Buffer处理形式，这样就可以大大地缓解关卡设计师在制作阶段因为深度冲突导致的显示中的瑕疵，统一关卡设计中因为平台化造成的精度问题引起的显示上的瑕疵。</strong>整体来讲，缩短了关卡制作的难度以及周期。 </span></p>
<p style="text-align: center;"><img src="http://p3.itc.cn/q_70/images03/20201118/5370299ac96d44ccb8431caf189cd1ee.png" /></p>
<p><span style="font-size: 16px;">下面再说一下《秦时明月世界》定制管线中关于 <strong>Grab Pass</strong>的定制过程。 </span></p>
<p><span style="font-size: 16px;">首先，Unity本身的Grab Pass是按照传统的形式，如果是相同的名字命名，它会使用同一张Grab Pass，如果是不同的名字命名，它会分别使用不同的Grab Pass。如果是项目中使用不慎，就会出现很多Grab Pass造成的一些RT的爆增，导致内存爆增的问题。《秦时明月世界》这里面采用了单一的控制方式，可以有效地缓解这种处理方式。</span></p>
<p><span style="font-size: 16px;">首先，它会 <strong>收集需求，Grab Pass的Renderer，禁止绘制，然后计算每个Renderer的可见性，判断需要哪些RT，同时根据具体的需求，我们可以使用全分辨率的RT，也可以使用不同情况缩小屏幕空间的一些RT动作，这样可以有效地控制RT的分辨率，节约内存。</strong></span></p>
<p><span style="font-size: 16px;">在整个绘制阶段，利用Unity提供的CommandBuffer，我们可以快速地截取屏幕，并且在特定的阶段会去使用这个Grab截图，然后进行特殊的效果。</span></p>
<p style="text-align: center;"><img src="http://p8.itc.cn/q_70/images03/20201118/31ec4d7953cd40aebfcb16be610e4a52.png" /></p>
<p><span style="font-size: 16px;">下面介绍一下我们《秦时明月世界》中定制管线的 <strong>后处理</strong>流程。 </span></p>
<p><span style="font-size: 16px;">《秦时明月世界》使用的是Unity为我们提供的后处理组件，传统的后处理组件整个的流程是这样的形式，首先通过一个屏幕空间的分辨率，经过若干个后处理的流程，进入到一个Unity提供的UberShader，然后再经过FinalPass整个的阶段，为了兼容传统的后处理流程OnRender Image的方法来保证传统的全屏处理绘制显示，最终再绘制到屏幕上，然后融合到UI相机显示到屏幕上。</span></p>
<p style="text-align: center;"><img src="http://p6.itc.cn/q_70/images03/20201118/4368af0456d94e20bb61f541b99ca69a.png" /></p>
<p><span style="font-size: 16px;">可以看到整个过程会产生大量的RT切换，相当于硬件FBO的切换，在Tile GPU上会造成额外的内存的回读，性能大量地消耗，而且至少会有两到三次的全屏幕的操作，这样会大大地影响整体的性能，使得后处理阶段会是一个在《秦时明月世界》项目中非常重要的性能消耗点。</span></p>
<p><span style="font-size: 16px;">基于这个，我们优化了后处理的流程，降低了它整个渲染的过程。首先， <strong>我们去掉了UberShader的过程，将UberShader及FinalPass和绘制屏幕这个过程三个全屏的操作统一到一起，同时又将传统的基于屏幕空间的绘制移除掉，这样就可以保证我们后处理的流程仅仅使用标准的一个全屏幕处理就可以直接与UI相机融合，绘制到屏幕上，不会造成额外的FBO的切换，也不会造成额外的FBO的回读操作，</strong>大大降低了内存中的回读以及全屏幕的运算操作，从而提升了后处理本身的效率。 </span></p>
<p style="text-align: center;"><img src="http://p3.itc.cn/q_70/images03/20201118/02817c27efee4dfdb8f893829423dd69.png" /></p>
<p><span style="font-size: 16px;">接下来讲《秦时明月世界》的定制渲染管线的 <strong>多光源</strong>。 </span></p>
<p><span style="font-size: 16px;">Unity中多光源的处理方式在传统的渲染管线中使用的是ForwardAdd这种方式，采用多个Pass绘制多个光源。《秦时明月世界》采用了 <strong>单Pass多光源的方式绘制。</strong></span></p>
<p><span style="font-size: 16px;">首先，使用静态分支去优化设备，同时控制内存，使用光照的位置来定义光源类型，Shader中也会根据区域进行划分。《秦时明月世界》中对于多光源主要使用的是点光源和聚光灯，整个过程会采用单Pass多光源的方式绘制。基于这种方式，就可以减少ForwardAdd增加Pass的这种情况，也就是说在多光源的情况下整个绘制过程，一个Pass会把所有灯光绘制到这个物体上，可以保证我们在对于DC特别敏感的设备上不会使用多Pass这种方式来增加系统的消耗，提升整个多光源效果上整体性能的开销。</span></p>
<p style="text-align: center;"><img src="http://p6.itc.cn/q_70/images03/20201118/e5aab934eb1c4ef888e33d93dcc110dd.png" /></p>
<p><span style="font-size: 16px;">给大家展示一下效果。主要展示的是我们在使用多光源的同时使用的一个单Pass多光源的效果。可以看到在技能释放的过程中，在技能相关的位置会有多个点光源去影响整个场景以及人物。但同时多个光源又是因为一个Pass来绘制的，会大大节省性能。</span></p>
<p style="text-align: center;"><img src="http://p3.itc.cn/q_70/images03/20201118/bf3b66693d8147a1b6daad68c71b5689.png" /></p>
<p><span style="font-size: 16px;">这个是后处理的边缘模煳和多点旋转的效果。</span></p>
<p style="text-align: center;"><img src="http://p5.itc.cn/q_70/images03/20201118/ab0352daee9c43aca2093028176a7a4f.png" /></p>
<p><span style="font-size: 16px;">这是一个混帧的效果。</span></p>
<p style="text-align: center;"><img src="//p5.itc.cn/q_70/images03/20201118/841705c0443249a0971926920d106df9.png" /></p>
<p><span style="font-size: 16px;">这是《秦时明月世界》中轻功的色相分离以及径向模煳的后处理展示。</span></p>
<p style="text-align: center;"><img src="http://p6.itc.cn/q_70/images03/20201118/f9d57cdec57c41b6b17bf3248832affb.png" /></p>
<p><span style="font-size: 16px;">这是水面效果的展示。这里面就用到了刚才提到的Grab Pass，用来做折射处理。</span></p>
<p style="text-align: center;"><img src="http://p6.itc.cn/q_70/images03/20201118/ff0327176d6f4fffae4e9fbb1a00d381.png" /></p>
<p><span style="font-size: 16px;">感谢大家！</span></p>
➜PEC年度盛典背后，千亿级流量规模的《和平精英》还将如何布局生态？
http://www.sohu.com/a/432518048_204728	55930
<p><span style="font-size: 16px;">在刚刚过去的周末（14-15日），2020和平精英国际冠军杯（下文简称PEC）在上海落下了帷幕。PEC自然是《和平精英》玩家众所周知的比赛，但相较去年，2020PEC不再仅作为一场聚焦国内外知名战队的国际赛事，而是已然升级为集结了赛事、明星、时装秀等多元内容的年度盛会。丰富的内容呈现，引发的关注和触达的领域都比去年有了巨大飞越。</span></p>
<p style="text-align: center;"><img src="http://p0.itc.cn/q_70/images03/20201118/afc22593a241480c9e0584308572e69e.png" /></p>
<p><span style="font-size: 16px;">纵观PEC举办前后，相关话题的热度在网络上可谓是持续升温。此前公布明星代言人时，#和平精英神秘代言人#的话题就在微博累计了5.9亿的阅读量，而PEC的总话题#2020和平精英国际冠军杯#目前也拥有了5.9亿阅读量和200万的讨论度。</span></p>
<p style="text-align: center;"><img src="http://p4.itc.cn/q_70/images03/20201118/ed016c7c51784ac892b0899d0f296f28.png" /></p>
<p><span style="font-size: 16px;">而在这备受瞩目的年度盛典上，一个不那么靠近节目单C位的颁奖环节却引发了笔者的注意。或许这场颁奖典礼，将是我们窥见《和平精英》在内容生态布局上见解与野心的一次机会。</span></p>
<p><span style="font-size: 16px;"><strong><span>PEC2020，精彩纷呈的“和平盛典”</span></strong></span></p>
<p><span style="font-size: 16px;">PEC作为《和平精英》的国际性赛事，最引人注目的无疑是国内外战队带来的精彩对决。本届PEC为期两天，共有来自10个国家的15支精英战队同台竞技，其中4AM、ELG、NV-XQF、RNG4四支中国战队来自PEL职业联盟，参战阵容堪称豪华。经过两天八场的紧张角逐，最终由NV-XQF战队夺得了本届PEC的冠军。</span></p>            <div class="lookall-box">
<div class="lookall-shadow"></div>
<section class="lookall">
<a href="javascript:;" class="show-all" id="showMore">
<em>展开全文</em>
</a>
</section>
</div>
<div class="hidden-content control-hide">
<p style="text-align: center;"><img src="http://p9.itc.cn/q_70/images03/20201118/872eaa519cec4a5993d551a2ba95de42.png" /></p>
<p><span style="font-size: 16px;">而除了精彩的特种兵对决，本届PEC还准备了很多让人眼花缭乱的节目。比如此前惊艳亮相的“特种兵代言天团”——迪丽热巴、华晨宇、王一博、杨超越等四位明星就空降到了本次盛典。</span></p>
<p><span style="font-size: 16px;">几位代言天团成员不但带来了现场表演，更是联手奉献了精彩的全明星表演赛，让粉丝们见证了他们热爱游戏的一面。流量明星的加盟，无疑快速吸引了大量泛娱乐圈层用户的注意，继续为PEC的热度添了一把火，引爆了话题的破圈速度。</span></p>
<p style="text-align: center;"><img src="http://p1.itc.cn/q_70/images03/20201118/29917c9f206e43a2a10d00976944c9a5.jpeg" /></p>
<p><span style="font-size: 16px;">除此之外，PEC现场的其他各类表演也为观众提供了耳目一新的审美观感。李云迪带来的大师级音乐现场，刘柏辛加盟的业内首次线下皮肤AR走秀，绚丽的舞台特效带来华丽的观赏效果，呈现着本届PEC在观赏性上的匠心独运。</span></p>
<p style="text-align: center;"><img src="http://p7.itc.cn/q_70/images03/20201118/2bfe81e054274b3cb61f41908c4ba4dd.jpeg" /></p>
<p><span style="font-size: 16px;">但回顾本届PEC盛会，最让笔者在意的却并非是电竞赛事或精彩表演，而是15日比赛结束后开展的一场“年度颁奖典礼”。</span></p>
<p><span style="font-size: 16px;">年度颁奖典礼所颁发的奖项，针对的是所有“对《和平精英》做出贡献的参与者”。这个范围很大，所以奖项设置的维度也很广，大致有年度跨界合作伙伴、年度内容合作伙伴、年度作者、年度主播和年度电竞参与者这五个奖项板块。这其中的获奖者既有玛莎拉蒂、特斯拉、王老吉等知名品牌，也有音乐人、视频作者或是同人爱好者这样的个体。</span></p>
<p style="text-align: center;"><img src="http://p8.itc.cn/q_70/images03/20201118/aab8ce362a8449b6af76be18bd8f747a.png" /></p>
<p><span style="font-size: 16px;">由此可见，在游戏衍生内容领域，《和平精英》已经创造了空前的繁荣局面，覆盖了非常广阔的圈层。这些获奖的主播、选手、俱乐部、KOL、MCN无疑代表了《和平精英》目前所能延伸的多元维度，而能举办这般规模、承载如此多领域流量的颁奖，在整个行业来说也是很少见的。</span></p>
<p><span style="font-size: 16px;">那么，《和平精英》为何能够做到这一步呢？</span></p>
<p><span style="font-size: 16px;"><strong><span>多维奖项背后的生态布局</span></strong></span></p>
<p><span style="font-size: 16px;">回顾这一年来《和平精英》开展的诸多拓展尝试，就不难发现在产品背后，一个充满可能的生态布局已然应运而生。</span></p>
<p><span style="font-size: 16px;">在跨界联动层面《和平精英》一直是动作频频，单看本次颁奖典礼中的12位获奖者就可见一斑。这些跨界合作者中有餐饮巨头，也有豪车品牌，整体的跨界范围可说是很大了。而在内容合作伙伴方面，《和平精英》则着重于联合平台，借助各种资源和扶植计划，助推游戏KOL们的成长，让更多有表达意愿的优秀创作者得以走到玩家的视野里。</span></p>
<p style="text-align: center;"><img src="http://p2.itc.cn/q_70/images03/20201118/0e52172559274cc2aa7b20d7971e34ce.png" /></p>
<p><span style="font-size: 16px;">正是在《和平精英》的着力扶持下，诞生了不少参与IP创作的优秀作者。本届PEC颁奖典礼上，就有6位创作者和5位主播收获得了官方的认可表彰。这些作者的创作形式颇为多元，包含直播、cosplay、音乐创作、视频制作等等，大量作品的持续产出，正不断拓展着IP的多元内涵呈现。</span></p>
<p><img src="http://p9.itc.cn/q_70/images03/20201118/96e29b3b0aaa4b58be557d30b4217e5e.png" /></p>
<p><span style="font-size: 16px;">比如《和平精英》的同人文化，就在这两年得到了长足发展。不少优质的同人作画、漫画、皮肤设计、视频剪辑都在玩家群体中大量传播、广泛发酵，点燃了更多玩家的创作热情。</span></p>
<p><span style="font-size: 16px;">官方开展的跨界联动或版本更新，还赋予了相关创作更多的发挥空间。就像曾经《和平精英》联动火箭少女时玩家创作的大量同人图，就吸引到了不少偶像粉丝的目光。</span></p>
<p><span style="font-size: 16px;">目前，#和平精英#话题在快手平台已经吸引了700万+的作者自产内容并产生了450亿的播放量，相关视频内容在抖音更是拥有了800亿的播放量。两平台过千亿的流量规模无疑验证着各平台上《和平精英》话题的火爆及创作者们的活跃程度。</span></p>
<p style="text-align: center;"><img src="http://p1.itc.cn/q_70/images03/20201118/94ab59a3e59249cfb8e3486484b1f77c.jpeg" /></p>
<p><span style="font-size: 16px;">而在虎牙、B站、快手等多个视频平台，也都能看到不少优质主播在以各自的风格传达着《和平精英》的魅力。荣获“年度影响力主播”大奖的几位视频作者，都为《和平精英》贡献了大量的多元化内容。</span></p>
<p><span style="font-size: 16px;">例如其中知名的《和平精英》主播花老湿，就凭借“战术大师”的视频风格被观众津津乐道，在斗鱼先后发布了446条视频作品，收获了320万的关注。号称“快手和平精英一哥”的王小歪，也在快手直播平台发布了513个作品，坐拥1700万的粉丝。而在B站累积了77万粉丝突击手蜜獾，则已经发布了418条《和平精英》的相关视频，收获454.6万点赞。</span></p>
<p style="text-align: center;"><img src="http://p5.itc.cn/q_70/images03/20201118/85b4e4b63798428b99e879b0d8ddc72b.png" /></p>
<p><span style="font-size: 16px;">这些作者的活跃，让《和平精英》这样上线才一年半的游戏迅速拥有了空前丰富的内容池子，并持续触达着更多的圈层用户。对不少玩家来说，每天收看《和平精英》的视频作品，与玩游戏是同样重要的娱乐享受，这类衍生内容无疑会赋予《和平精英》IP更多样的乐趣。</span></p>
<p><span style="font-size: 16px;">至于电竞维度更是无需多言，PEC、PEL等与国际接轨的赛事举办，众多知名俱乐部、选手、解说的应运而生，都在为《和平精英》注入着生机。2020年度的比赛日均独立观赛用户已超过了2600万，电竞赛事内容观看总量更是达到了141亿。在战队应援系统上线之后，产品内参与到战队助威的人次也达到了860万。</span></p>
<p><span style="font-size: 16px;">《和平精英》相关赛事的影响力，正吸引着更多观众和粉丝的持续关注。电竞维度的延展，绝对是《和平精英》生态内的一条重要路线。</span></p>
<p style="text-align: center;"><img src="http://p4.itc.cn/q_70/images03/20201118/d8b090ab877c4c5593077dd658507d3a.png" /></p>
<p><span style="font-size: 16px;">作为一款大DAU游戏，《和平精英》在受众和流量上一直拥有着巨大优势，官方借助这样的优势，针对IP特质拓展了诸多的衍生内容。而这些衍生内容目前已然是自成体系、彼此助推，形成了规模可观、形式多样的生态流量池，持续为IP输送着活力。</span></p>
<p><span style="font-size: 16px;">最关键的是，《和平精英》还在不断积极鼓励、维护这样的生态池，并吸引更多玩家投入到IP的创作中去。越来越多的游戏参与者，正在向《和平精英》生态内容的创作者做转变，用自己热爱的形式去呈现对游戏的理解。相信在未来，整个IP的生态还将向更深远的维度迈进。</span></p>
<p><span style="font-size: 16px;"><strong><span>人人都是创作者，多元生态池要如何炼成？</span></strong></span></p>
<p><span style="font-size: 16px;">世面上热门的游戏产品很多，但能搭建出一个完善的生态布局，并借此持续产出高质量内容为用户带来多元体验的产品却并不多见。因为这不单需要游戏自身拥有足够的质量和可拓展性，还需要厂商投入大量的资源和精力，去打通不同维度的通路、催生不同形式的内容。</span></p>
<p><span style="font-size: 16px;">以如今《和平精英》对整个生态池的鼓励姿态，假以时日，《和平精英》的多元生态想必将会成为IP的一大吸引点。而这样的生态建设，也正在成为创作者与《和平精英》的连接枢纽 。</span></p>
<p><span style="font-size: 16px;">生态作者能为《和平精英》提供内容，而游戏也能扶持KOL去获得更多的流量，这种双向互动形成的良性循环，将引导IP的生态建设走向全新高度，充满了难以预估的可能性和生命力。</span></p>
<p style="text-align: center;"><img src="http://p3.itc.cn/q_70/images03/20201118/70bb08879d2241598cefb63dc38cead5.png" /></p>
<p><span style="font-size: 16px;">可以说，在这个内容为王的时代里，《和平精英》对内容的挖掘并不止于深耕产品。在将游戏打磨为射击品类代表性产品时，《和平精英》更注重在外延内容领域的拓展，去尝试与玩家们共生共长、相互支持。单一游戏产品的生命也许是有周期的，但一个能引发用户参与其中、自主创作鲜活内容的生态布局，其发展自然是不可限量的。</span></p>
<p><span style="font-size: 16px;">总体来看，《和平精英》看重IP所蕴含的可能性，坚持用各种新颖的方式去触达全新领域，今年游戏甚至在公益上都取得了相应成就，更是充分验证了产品蕴含的社会价值潜力。</span></p>
<p><span style="font-size: 16px;">相信伴随《和平精英》在跨界合作、创作者激励、电竞赛事运营等多个维度的持续发力下，产品的整个生态都将在未来迸发出更耀眼的魅力吧。</span></p>
➜RCEP协定生效后， 中国可从日本零关税进口电子游戏机
http://www.sohu.com/a/432518062_204728	55930
<p><span style="font-size: 16px;">2020年11月15日，《区域全面经济伙伴关系协定》（RCEP）正式签署。</span></p>
<p><span style="font-size: 16px;">中国自由贸易区服务网公示了RCEP协定文本全文。协定附件一包含中国对东盟成员国、澳大利亚、日本、韩国及新西兰的关税承诺表。其中，中国对日本关税承诺表显示，RCEP <span style="font-size: 16px;">协定</span>生效后，中国从日本进口的电子游戏机将收取零关税。 </span></p>
<p><span style="font-size: 16px;">恰逢PS5上市之际，价格是否会有优惠，成为了许多玩家关注的焦点。</span></p>
<p><img src="http://p2.itc.cn/q_70/images03/20201118/a1f772c8db2f4ab8a1c09d6eae59f61a.png" /></p>
<p><span style="font-size: 16px;">目前PS5已经在美国、日本、韩国、加拿大等地区正式发售，但是国行版上市日期仍未有官方确切消息。近日传出PS5国行版将于12月18日发布。</span></p>
<p><span style="font-size: 16px;"><strong>传闻称国行PS 5:</strong></span></p>
<p><img src="http://p0.itc.cn/q_70/images03/20201118/11ee5b015d5a4cbcb2e599f5b836295c.png" /></p>
<p><span style="font-size: 16px;">1. 可以玩全区版本的光盘游戏</span></p>
<p><span style="font-size: 16px;">2. 先上市的国行主机暂时只有光驱版</span></p>
<p><span style="font-size: 16px;">3. 官网会在12月18日发布会时同步开启网上预订</span></p>
<p><span style="font-size: 16px;">4. 国行数字版主机不会晚于2021年农历春节前发布</span></p>
<p><span style="font-size: 16px;">5. 国行主机上市时将同步推出第三方制作的3部蓝光4K电影</span></p>
<p><span style="font-size: 16px;">6. 微软XSX国行主机发布时间将略早于PS5，XSS也没有出现在国行首发阵容中</span></p>
<p><span style="font-size: 16px;">7. 两款新主机都将在官网优先开启预订，2020年圣诞节前发货</span></p>
<p><span style="font-size: 16px;">中国对日本关税承诺表免除的是进口税，猜测国行主机价格有可能下降。</span></p>
<p><span><span style="font-size: 16px;">中国对日本关税承诺表链接：</span></span></p>
<p><span><span style="font-size: 16px;">http://fta.mofcom.gov.cn/rcep/rceppdf/04%20Schedules%20-%20CN%20for%20JP_cn.pdf </span></span></p>
➜【干货分享】合理使用工具，“小团队”也能做出“大制作”
http://www.sohu.com/a/432518066_204728	55930
<p><span style="font-size: 16px;">昨天（</span><span style="font-size: 16px;">11</span><span style="font-size: 16px;">月</span><span style="font-size: 16px;">16</span><span style="font-size: 16px;">日</span><span style="font-size: 16px;">），中国</span><span style="font-size: 16px;">Unity</span><span style="font-size: 16px;">线上技术大会正式拉开帷幕</span><span style="font-size: 16px;">。在游戏专场，</span><span style="font-size: 16px;">Magic Desgin Studios</span><span style="font-size: 16px;">创始人路杨带来了主题为</span><strong><span style="font-size: 16px;">“小团队，大制作：</span><span style="font-size: 16px;">分享《非常英雄》游戏开发的关键因素”</span></strong><span style="font-size: 16px;">的演讲，针对制作组如何使用</span><span style="font-size: 16px;">Unity</span><span style="font-size: 16px;">引擎开发《非常英雄》，他进行了非常细致的拆解。</span></p>
<p style="text-align: center;"><img src="http://p1.itc.cn/q_70/images03/20201118/21e84904c4f045b7afda084be2407856.png" /></p>
<p><span style="font-size: 16px;"><strong>以下是演讲内容（有节选）：</strong></span></p>
<p><span style="font-size: 16px;">大家好！我是《非常英雄》的制作人路杨。很荣幸能够受邀参加这次活动。感谢Unity中国提供这样一个平台，能够在这里和大家相互交流学习。我觉得小团队属实，但是大制作实在是不敢当。</span></p>
<p><span style="font-size: 16px;">主题主要想分享一下《非常英雄》在整个开发过程当中遇见了哪些问题，背后团队做了哪些选择，以及这些选择所带来的一些影响。</span></p>
<p style="text-align: center;"><img src="http://p1.itc.cn/q_70/images03/20201118/9c884226fe014089a6f5e45f7905f7ea.png" /></p>
<p><span style="font-size: 16px;">《非常英雄》是一款《西游记》为故事背景的2D横板动作冒险游戏。游戏的玩法根据剧情的发展，融合了格斗、平台跳跃、解谜等多种元素。这其中唯美的画风和角色动作表现是我们做得相对比较出色的地方。所以，我们先进入一段视频，边看边聊。</span></p>
<p><span style="font-size: 16px;">整个故事是以大家熟悉的《西游记》为背景，这里有火焰山、白骨岭，包括山川、河流，一些大大小小的我们知道的和不太熟悉的小怪等等。</span></p>            <div class="lookall-box">
<div class="lookall-shadow"></div>
<section class="lookall">
<a href="javascript:;" class="show-all" id="showMore">
<em>展开全文</em>
</a>
</section>
</div>
<div class="hidden-content control-hide">
<p style="text-align: center;"><img src="http://p6.itc.cn/q_70/images03/20201118/2004cd165b0744068a719c1f77ff1210.png" /></p>
<p><span style="font-size: 16px;">场景我们选择的画风是相对比较唯美，但是融和了一些西方化色彩的特点，整体的颜色色调比较饱和。</span></p>
<p><span style="font-size: 16px;">玩法上也是根据师徒四人各自的特点做了一些延展性的开发。比如说师傅的法师属性，悟空主要还是武功担当的角色。师徒四人也可以附体于敌人，完成一些相应的解迷类的玩法。故事层面，我们做了大量改编，主要想让这款产品看起来有点搞笑、合家欢的方向。所以说对原作做了大量的改编。</span></p>
<p><span style="font-size: 16px;">《非常英雄》发售后获得了包括安妮奖最佳角色动画大奖在内的多个国际奖项和提名，主要集中于最佳美术以及动画表现这个领域。</span></p>
<p><span style="font-size: 16px;">我们现在进入开发的制作过程。这里主要想和大家介绍一下《非常英雄》在画面表现上做了哪些努力和尝试，踩了哪些坑。</span></p>
<p><span style="font-size: 16px;">画面表现本身涉及的内容比较广泛，包括硬件、软件的支持，美术设计、动画特效、界面等等，前前后后有很多内容。因为时间的关系，这里我想集中介绍一下这款产品做得相对比较出色的，画面场面美术、动画设计这两点。</span></p>
<p><span style="font-size: 16px;">我将通过四个方面介绍整个开发过程中我们是如何一步步地从最初的设想和愿景，到最终实现整个游戏的。</span></p>
<p style="text-align: center;"><img src="http://p5.itc.cn/q_70/images03/20201118/1767dc4d9b5f491984411e1b98fbb94c.png" /></p>
<p><span style="font-size: 16px;"><strong>画面表现：从草图到游戏动作设计</strong></span></p>
<p><span style="font-size: 16px;">从第一点动画设计的角度上来讲，我们其实并没有做特别大的流程创新，基本上也是按照常规的怎么样确定角色的形态特征，草图阶段，动画设计阶段，如何融合，最终到调整QA的阶段。</span></p>
<p style="text-align: center;"><img src="http://p2.itc.cn/q_70/images03/20201118/5f24e3ae3810440d82037d790e82b7d4.png" /></p>
<p><span style="font-size: 16px;">在整个过程当中，我们有一个比较大的理念就是希望能够在表现形式上有一个更丰富的体现，基本上我们最初的设计理念是按照2D动画片的理念进行的。我们通过一个视频来了解一下。</span></p>
<p style="text-align: center;"><img src="http://p1.itc.cn/q_70/images03/20201118/0dc8cfdab2424bc69dded1b3b9ab971a.png" /></p>
<p><span style="font-size: 16px;">大家可以看到， <strong>首先我们是以线稿手绘的形式对整个动画的设计定一个大的方向</strong>，这些工作主要都是由我们的动画总监一个人独立完成的。首先确定角色的形态特点和在游戏当中出场的需要，然后动画总监根据这些信息设计角色的初稿，并开始整个动画的设计，比如它的镜头感，动作特性、个性等等。 </span></p>
<p style="text-align: center;"><img src="http://p1.itc.cn/q_70/images03/20201118/cd8a0f2d3e0642c48a3be33e46b4dd28.png" /></p>
<p><span style="font-size: 16px;">其实初稿最主要的目的是确定角色的PD，在这个阶段中，我们并不规定这个角色到底穿什么样的服装，有哪些细节，只是把比例确定下来。</span></p>
<p style="text-align: center;"><img src="http://p2.itc.cn/q_70/images03/20201118/ddf7869500504e6fb07ce6a521538706.png" /></p>
<p><span style="font-size: 16px;">第二步，角色设计师开始绘制在这个比例状态下它的一些服饰上的特点，面部的特点、色彩等等。动画师根据最初的比例开始设置骨骼，比如说骨骼的数量。这一部分也涉及一些与程序以及游戏设计师沟通的部分，因为骨骼的数量最终会影响整个产品在内存以及GPU方面分配上的资源。</span></p>
<p><span style="font-size: 16px;">第三个部分就是根据角色在游戏当中出场的需要，对所有的动作要进行合理地分组、规划，并且要跟特效、操控融合起来，达到一个最终我们想达到的效果。</span></p>
<p><span style="font-size: 16px;">最后一点，合理编排资源。我们大家经常讲好钢要用在刀刃上，但是在整个过程中总是会有做一做就控制不住的情况出现。所以在这里，我们在整个开发的过程中还是要不断地提醒自己，这一部分的开发对于整个产品的表达到底起到什么样的作用，是不是合理地运用了所有的资源，而不是将很多工作量、热情用在了一个在游戏当中看起来并不是特别起眼，或者是玩家根本很难发现的部分。所以，这一点我认为在整个开发过程中是要不断地审视，不断地提醒自己，一定要把最优质的表现放到最合理的资源分配的优先级里。</span></p>
<p><span style="font-size: 16px;">下面我们看一下在游戏最终的实现过程中是如何一步步来完成的。我们也是通过一段视频来了解一下。这是最初我们角色设计的原稿，主要是根据剧情的需要，由动画总监和角色设计师来确定下来的初稿。接下来我们使用了一款Spine 2D骨骼动画制作软件来进行各个动作的编排。</span></p>
<p style="text-align: center;"><img src="http://p8.itc.cn/q_70/images03/20201118/9229a8a941c44c7a8ff3c41e98147257.png" /></p>
<p><span style="font-size: 16px;">接下来就要进行动作的分组，和游戏设计师共同把这些动画能够按照我们既定的节奏在整个游戏当中体现出来。鳄鱼这一部分大家可以看到是对贴图怎么样进行切分的。这里面主要都是通过设计师个人的能力来进行一些动画上的表现、设计以及调整。</span></p>
<p style="text-align: center;"><img src="http://p6.itc.cn/q_70/images03/20201118/ad27f1c7d3da4eddb997b54a093a07ad.png" /></p>
<p><span style="font-size: 16px;">这里面我们可以看到同一套骨骼可以对贴图做不停的更换，这样增加整个角色的丰富性。这里沙和尚大家可以看到它的贴图和最终在游戏当中完成后的贴图并不是一套内容，这个就是在中间过程中角色设计师以及动画师同时进行项目的开发。我们在最后阶段再进行整合，整合之后再反复地不断打磨。</span></p>
<p><span style="font-size: 16px;">这里面有一个比较好的优势，算是在2D平面里面在贴图方面的更替，包括打磨阶段是比较方便，而且比较随性的，因为有的时候不需要太多的技术支持，而且设计师会按照自己的感觉进行一些范围内的调整。</span></p>
<p><span style="font-size: 16px;"><strong>场景应用：开发好用的工具，保证品质，提高生产率</strong></span></p>
<p><span style="font-size: 16px;">接下来我们要讲一些场景方面做了哪些方面的努力。</span></p>
<p><span style="font-size: 16px;">第一点就是在画面表现方面我们要有一个大方向。目前在2D表现方面有两个比较主流的阵营，一个是以马里奥为代表的堆盒子的方式。堆盒子的方式优点是比较明显的，在这个品类里面有很多优秀的作品，包括我们熟悉的《马里奥》《空中骑士》等等。 <strong>优点最主要的是体现在方便开发人员进行游戏设计上。因为它非常好量化。不管是我们跳动的距离、移动的距离、高度等等的都可以通过每一个方格来进行量化。</strong></span></p>
<p><span style="font-size: 16px;">对于玩家来说，他也比较好判断这种反馈。比如说我这个角色可以跳两个方格或者三个方格远，这样的话玩家可以很容易地判定这个地方能跳过去，这个地方我跳不过去。我们说 <strong>相对有所欠缺的可能就是画面它不如曲线编辑来得那么生动。尤其是在表现自然场景方面有可能没那么生动。</strong></span></p>
<p style="text-align: center;"><img src="http://p2.itc.cn/q_70/images03/20201118/1a1dfa2f0f964db1ad9dedc09a9a281c.png" /></p>
<p><span style="font-size: 16px;">右边这个是以《雷曼》为代表的曲线编辑的方式。这种方式大家可以看到整个画面会比较丰富，而且特别适合表现自然类的场景，比如说不平整的自然地面、森林、山川等， <strong>优点是画面表现力上，缺点就是它会增加游戏设计以及开发的难度</strong>。因为所有的地形都是曲线编辑的，所以说有很多的比如说跳跃的距离、高度等等的是很难得到一个特别准确而具体的反馈的，同时对玩家也经常会出现这种问题。所以，这一块在游戏开发最开始的时候需要开发团队在这方面做出取舍。 </span></p>
<p><span style="font-size: 16px;">《非常英雄》选择了第二种曲线编辑的方式。因为这个比较符合我们对这款产品的愿景，而且我们希望在画面表现力上能更上一层，能够有更好的表现。此外，根据整个产品前期的设计及故事需要，自然风光比较多，所以这种方式我们在第一时间基本上是没经过什么讨论就确定下来的。</span></p>
<p><span style="font-size: 16px;"><strong>接下来，我们要做的事情就是开发一个怎样的工具。</strong>这个工具我们最开始的想法是希望它像Photoshop一样特别方便使用，把很多后台需要的技术、点选的各个细节尽量简化，也尽量用图层的概念，符合设计师在创作原画或创作过程中的使用习惯。基本上是一种在画画的感觉。 </span></p>
<p><span style="font-size: 16px;">在实际开发的时候，我们要规定好在这里面有哪些素材是我们要使用的，并且对这些素材进行分类，所有可加入的这些效果都做一个规范化，做成各个不同的组件，这样的话第一个是方便我们使用，有一个比较完整的素材库方便之后使用。第二个是方便控制整个产品的质量。</span></p>
<p style="text-align: center;"><img src="http://p2.itc.cn/q_70/images03/20201118/3d447df8da824965884f077b90fa307f.png" /></p>
<p><span style="font-size: 16px;">接下来我们看一下具体是怎么样通过这个工作流程一点点地实现最初的场景建立，到最后的画面的视觉表现。</span></p>
<p><span style="font-size: 16px;"><strong>第一点，大家都比较熟悉</strong>，我们用的是Unity的引擎。这个基本上是我们在项目伊始的时候没怎么讨论就决定的事情。其中有两方面的原因：一个是我们想实现的效果Unity完全可以实现。第二个就是我们团队所在的位置，包括周边人才市场对这个工具的熟悉程度。这样的话，我们招收人才也比较方便一些。 </span></p>
<p><span style="font-size: 16px;"><strong>第二个，我们这里提到了一个地形编辑器</strong>。我这里特别用了一个30%的屏幕面积。这个其实是一个概数，基本上地形大时候在画面里面占30%的面积，所以说地形编辑器对我们来讲就是一个重中之重，不光是要兼顾画面的面积，同时它也涉及到表现的效果、效率，三个方面的内容。所以说编辑器在整个开发过程中是一个重点开发的工具。 </span></p>
<p><span style="font-size: 16px;"><strong>第三个方面，色彩编辑更符合设计师的使用习惯，方便使用</strong>，这个我在之前也提到了，就是尽量能够简化工具的复杂程度，尽量简化工作流程。所以，在我们整个开发过程中基本上所有美术场景是由一位设计师来独立完成的，也就是说他从前期建立整个场景，然后到校色，到添加细节，到最后优化，一整套流程就是一个设计师来完成。 </span></p>
<p style="text-align: center;"><img src="//p6.itc.cn/q_70/images03/20201118/ce3077a1e0e447b3ad8612631d4eacbc.png" /></p>
<p><span style="font-size: 16px;">我们在整个开发过程中一共有4位设计师，每位设计师会兼顾1个大的场景。比如说火焰山由一位设计师来完成，白骨岭由一位设计师来独立完成，等最终完成之后我们再由一个整体的统筹。而且有的时候设计师之间会互相更换一些工作场景，看一下对方都在哪些方面做得更好，哪些方面他有更多新的想法，可以添加进去。这样的话，每个设计师既保持了独立，也保持了相互之间可以借鉴学习的氛围。从整体的结构上来看，还是比较不错的。</span></p>
<p><span style="font-size: 16px;"><strong>开发过程：《非常英雄》的从无到有</strong></span></p>
<p><span style="font-size: 16px;">接下来，我们通过一个相对比较完整的视频为大家简单介绍一下整个开发的工作流程，视频稍微有点长，我会边解说边让大家观看。</span></p>
<p><span style="font-size: 16px;">首先大家可以看到这是一个最小的地形单位，是一个小的模块，这个就是之前我们提到的要规范工作的素材库也好或者是组件也好。当我们确定下来之后，我们就开始了一个地形的编辑。这里面比较大的概念是两个，第一个是我们先确定一下这个场景是个什么样的题材，比如说是森林，溶洞内部，火焰山，水下等这些场景。</span></p>
<p><span style="font-size: 16px;">当我们先确定好之后，第二个就是要确认它的光源效果，就是我们所说的大环境。在这个场景当中，我们一般会想这个光源是来自于上方还是来自于远景的部分。远景要亮过前景，还是前景要亮过远景，这个在整个设定过程中是两个最先要确定下来的一个内容。</span></p>
<p><span style="font-size: 16px;">所以说 <strong>这方面我们开发了一整套工具</strong>，大家可以看一下视频。这个是地形编辑器。大家可以看到整个地形编辑是通过节点来完成的。这里面给大家简单介绍一下我们做了哪些节点上的控制。第一个是曲线节点，每一个节点是可以控制它的平滑程度的。第二个是可以进行缩放。第三个是可以控制节点周围的顶点色。通过这三个方面的调节，就可以带来一个相对来说比较丰富的地形。比如说这个地形会有一些起伏的变化，会有一些光和暗影之间的变化，而且会有一些色相上的变化。比如说在这个范围受到一些环境的影响，有一点蓝光，但是其他的地方还是暖色调的。 </span></p>
<p style="text-align: center;"><img src="http://p1.itc.cn/q_70/images03/20201118/3a0082ff1cec4f058e12e333104a0f01.png" /></p>
<p><span style="font-size: 16px;">大家可以看到当我们编辑完第一个地形之后就可以添加一些小的细节。同时，我们可以用复制的方式产生前景的地形。前景地形我们可以先换一下贴图，换成另一个材质的表现形式，这样的话跟中景有一个区分。</span></p>
<p style="text-align: center;"><img src="http://p0.itc.cn/q_70/images03/20201118/7850bbb3f7da4ee6a4dd2538ee6ec037.png" /></p>
<p><span style="font-size: 16px;">大家可以看一下这部分是植入了植被。植被的植入，首先我们先建立好一个植物的素材库。植物有的属性我们全部放到素材库里面。比如说什么样的植被，颜色，以及它受风摆动的频率跟节奏。这样的话，再通过我们的地形编辑器把它加到整个地形当中。这一部分是自动来完成的。</span></p>
<p><span style="font-size: 16px;">我们是通过它的密度、大小、频率自动种到地形编辑器上。同样的系统，不光是植被，包括火焰山，我们基本上看不到植被，但是会有很多可以破坏的岩石的效果，也是通过同样的工具去完成的。首先我们先做好很多可以破坏的石柱，再把它按照相应的比例以及密度种到地面上去。</span></p>
<p style="text-align: center;"><img src="http://p6.itc.cn/q_70/images03/20201118/2bee30015ed84dce8eaa59a4f239aba7.png" /></p>
<p><span style="font-size: 16px;">在这里大家可以看到虽然画面还比较简陋，但是这个场景里面只有一个背景，加上地形，基本上已经填满了整个画布。接下来的工作就是要为这些画布上添加更多的细节，远景、中景、近景，来增加整个画面的感染力。可以看到移动的光影我们是通过一个材质球来实现的，其实这是一个三张叠加的贴图在不停地滚动来实现的。这一部分稍后会给大家做一些具体的讲解。</span></p>
<p><span style="font-size: 16px;">大家可以看到在填好整个画布之后我们做了一个整个场景色调的调整，速度很快。这个并不一定是代表最终的效果，但是，首先会有点像作画一点，先给画面一个大的基调。然后我们开始添加一些画面上的细节。</span></p>
<p><span style="font-size: 16px;">这里面大家可以看到我们是通过一个简单的方式来添加雾效的，用来区分远景和中景之间的过渡。雾效这部分我们一共做了3套系统来实现。第一套系统就是远景。整个远景我们是按照距离划分设置了整个雾效过渡的色彩条，用来调节不同距离雾的浓度、密度以及色彩，这是对于整个场景大环境的调整。</span></p>
<p style="text-align: center;"><img src="http://p2.itc.cn/q_70/images03/20201118/b0e192e67f024daabd564295146ba8b3.png" /></p>
<p><span style="font-size: 16px;">第二个就是通过我之前提到的整体的色彩是背景要亮，还是前景要亮。明暗程度也是通过摄像机的距离来进行调整的。除了这两个大的环境调整，一个是控制雾的色彩、密度，第二个是控制整个场景灯光的强度，第三个就是用一个比较简单的方式，比如说以面或者点的方式来增加场景上的一些过渡。</span></p>
<p><span style="font-size: 16px;">大家可以看到这一部分的视频主要是为场景当中添加相应的一些素材。大家可以看到在中景的时候这个植物是比较亮的，当我们移到近景的时候自然而然就暗下来了，这一部分就是之前提到的灯光的设置，就是大环境的设置。这一部分是自动的。因为在我们之前做的一些项目中这一部分是需要设计师逐个进行调整的。</span></p>
<p><span style="font-size: 16px;">如果是内容量比较少相对还好，我们可以调整一张贴图、两张贴图，或者是对物件进行色彩上的调整，但是，如果我们要不断地堆加图层的数量，场景的丰富程度，这个工作量是相当惊人的，虽然每一个点击鼠标都很简单，但是，有可能我们因为这一件事情要反反复复重复同一个工作上万次，所以在这一点上设置一个大的场景环境的工具就非常非常重要。因为这样的话设计师只要调整图层的距离就可以了。</span></p>
<p style="text-align: center;"><img src="http://p8.itc.cn/q_70/images03/20201118/f5fa5d932f25493b8bc6e02f84de00b5.png" /></p>
<p><span style="font-size: 16px;">因为《非常英雄》这个项目是从2015年开始启动，2016、2017年开始前期的开发、准备，包括这些工具。有一些内容其实在Unity的后续版本中已经有了很多类似这样的工具，稍后我会给大家介绍一下。</span></p>
<p><span style="font-size: 16px;">这里大家可以看一下左边的小的视图。里面有一些比较有意思的事情，大家可以看到前景是比较暗的，第二，它会有一个自动的虚化。这一部分其实是跟灯光系统相结合的。我们在前景和远景方面设置了这种虚化的效果，也是由设计师自己来判定比如说哪个景深我需要虚化到什么程度，他会做一个相应的调节，基本上这样的方式有助于平衡特别丰富的画面，因为有时候内容太多我们很难看到角色的一些打斗，或者游戏玩法相关的一些内容。通过这种虚化的效果，能够更好地突出主题。</span></p>
<p><span style="font-size: 16px;">这一部分参数的设计是跟灯光比较类似的。基本上也是设置在场景当中。</span></p>
<p><span style="font-size: 16px;">添加完了细节之后，我们接下来就是对整个场景的效果做一个整体的调整。这个方面我们主要是开发了一整套的色彩调整工具。在这里大家可以看到。不过，这个是我们在2016年的时候开发的一整套工具，在新版的Unity里面，比如Unity 2019已经有Post Process这个功能了，所以说和我们当时开发的Art Setting（Unity中的一个C#脚本）的这一部分内容是很接近的。如果大家用新版的Unity，就可以很方便地进行调节了。</span></p>
<p><span style="font-size: 16px;">大家可以看到通过滤镜的方式，首先是可以调整整个画面色调关系的变化。因为整个地形是地形编辑器，所以说我们在开发的同时可以对地表、立面、棚顶逐个进行调整，不管是色彩、明暗变化还是色相变化。更小的细节可以通过节点来进行控制。同时，我们也可以控制雾的效果。</span></p>
<p><span style="font-size: 16px;">以上就是整个场景的开发过程，从最开始一直到最后进行调整的过程。</span></p>
<p><span style="font-size: 16px;"><strong>后期QA:合理使用工具简化工作流，减少Debug痛苦</strong></span></p>
<p><span style="font-size: 16px;">这里除了整个工作流程之外，还有一个方面比较重要，就是在后期的QA方面。因为当时在开发工具的时候我们更多地是考虑怎么样简化工作流，怎么样简化这些不必要的环节，简化工具，但是，因为没有真正地进入到项目后期的开发包括Debug阶段，所以说整个工具在最开始并没有考虑到这一部分内容。</span></p>
<p><span style="font-size: 16px;">但是，好在是在之前的工作流的管理上我们强调需要把所有的东西要优化，要组件化，并且要把每一个图层分得比较清晰，虽然没有强调最后的QA、优化，包括到后期我们做手机版移植这部分的内容，在最开始的时候没有考虑，但是还好前期我们做了这部分工作，现在来看是非常有必要的。</span></p>
<p><span style="font-size: 16px;">因为整个场景我们一共分了6层，其中的4层是必要层，远景，然后是远景和我们说的中景就是游戏玩法的那一层，中间的一个过渡层，然后游戏玩法的层，最后是近景，一共分了这4层。其中还有2层是属于修饰层。一层是特效。有的时候这个特效是分布在这四个层之中的。有的时候是单独的，一些部分比较耗费资源的特效。还有一层是在特定的过程动画一些比较特殊的场景转换中会出现的一个图层。之所以做这些，是因为它对整个产品后期的移植和优化是至关重要的。</span></p>
<p><span style="font-size: 16px;"><strong>这一部分内容其实主要想介绍的是解决开发工具耗费资源的平衡</strong>，以及如何寻求一个比较适合的点，什么样的工具是适合的，开发到什么程度我们可以暂时先停下来，然后考虑一下这个工具是不是已经够用了。因为大家一定要了解到一点，没有完美的工具，也没有什么都能干的工具，只有比较适合的工具。所以这一点上不管是各个开发组，大团队也好，还是小团队，尤其对于小团队要尽量做到适可而止，觉得差不多，我们能实现这个效果了，要把更多的精力专注到游戏的设计、情感的体验这方面，而不是过度地强调这个工具要如何多完善，包罗万象，因为这个其实都是根据需求来进行调整的。 </span></p>
<p style="text-align: center;"><img src="http://p8.itc.cn/q_70/images03/20201118/13c9c63e59ea42dfb904bfd133fbbb7b.png" /></p>
<p><span style="font-size: 16px;">接下来我们讲一下刚才提到的分层优化。分层优化其实刚才我介绍了一共分了4个必要层，2个调整层。</span></p>
<p><span style="font-size: 16px;"><strong>第二个就是我们整个的后期QA调整是怎么样完成的。</strong>这一段我们也进入一个视频了解一下。大家可以看到在刚才的页面中有一张贴图，那张贴图就是在这个视频里面的原始贴图。大家可以看到这里面有更多灯光的效果，后期渲染的效果，并且有光的变化。这里面我简单介绍一下这种效果的实现和最开始的选择。在这方面灯光其实对整个画面的表现是至关重要的。 </span></p>
<p><span style="font-size: 16px;">但是，我们通过之前一些项目的积累发现有两个问题。第一个是如果要通过2D的方式来表现特别丰富的灯光效果，难度第一个是比较大的，因为这是一个平面，所以说我们想要的一些具体的效果是希望它是可控的，而且，需要整个暗影是比较柔和的，而且有的时候色彩是过于强烈的，现实当中的物理灯光有时候很难达到这种效果。通常我们是通过几张贴图来完成的。感兴趣的朋友也可以看一下奥日的分享视频，他们在灯光系统上的开发以及选择基本上是非常非常前沿的，而且做得也非常非常棒。但是，他们的实现过程是通过不同的贴图的图层来实现的，也就是说要规定光的范围，光的颜色，这样的话对美术设计师会成几何倍数增加他的工作量。</span></p>
<p><span style="font-size: 16px;">早年我们在做《雷曼》那个项目的时候大部分是通过两张贴图完成的，一张是原始贴图，另一张是光效贴图进行完成的，其实是增加一个遮罩。这次在制作《非常英雄》的时候我们是希望能够降低美术设计师的工作量，又想让画面看起来动感、丰富，而且这个光源是有变化，而且是可控的，所以在这两点之间我们就特别挣扎地反反复复地不停地找这种解决方案。最终的解决方案就像这个视频里面大家所看到的这种效果，总体看起来还不错，基本上是我们想要的目标实现了，是通过一张贴图完成的。通过一张贴图，控制顶点色，以及动态的顶点色的变化来实现的。优点是表现力还可以。然后大量地节省了内存显卡的占有率，同时也节约了开发时间和预算。最关键的是我们的设计师都比较高兴，因为之前他们对重复地画一张贴图，而且都要堆的很急这件事情非常非常头疼。</span></p>
<p><span style="font-size: 16px;"><strong>第三部分主要就是讲一下优化的部分。</strong>QA这部分对小团队来讲确实是很有挑战性的，而且特别巨大的工作。我们在最开始的时候还没有发现这件事情这么艰巨，因为以前大家在大公司做的时候是有专门的团队很多人在测试这个产品。但是，等到我们工作室规模很小的时候这个测试就是个很头疼的事情。尤其是游戏时间在不断地增加，但是，我们的团队规模又不能增加，所以从始至终我们只有4个测试员，一开始他们说也没什么可测的，等着到了后期之后跑一遍游戏需要6、7个小时，他说一个测试什么也不干，一天只能跑一遍。所以说他们到后期就没日没夜，有的时候一个人要同时测试两个画面，所以就特别地辛苦。 </span></p>
<p style="text-align: center;"><img src="http://p1.itc.cn/q_70/images03/20201118/f23939282eb8463592e060058a41d2e5.png" /></p>
<p><span style="font-size: 16px;">在这种背景下，我们去开发一些能够自动跑图的工具，比如自动跑图，就是角色，晚上下班之后，我们可以把这个游戏设置在这儿，让这个角色在里面自动跑，后来测哪些问题。比如自动UI不停地截各种各样的UI。第二天我们把各种测试报告收集起来，分发下去，看看怎么样进行Debug的操作。这一部分对于小团队来说我觉得还是很有必要的，即使花一点时间在开发的前期和中期的时候把这个东西准备好，我觉得是会大大降低游戏Debug的痛苦程度。</span></p>
<p><span style="font-size: 16px;">再次感谢大家的支持！感谢Unity中国举办这次活动，在此谢谢大家！感谢！</span></p>