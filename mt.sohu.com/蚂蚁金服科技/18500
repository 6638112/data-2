➜蚂蚁mPaaS：有人修建高楼，有人重构城市
http://www.sohu.com/a/414987235_99940985	27569
<p class="ql-align-center"><img src="http://p1.itc.cn/images01/20200826/c39be4fdb92e44948b13b0996577c5f5.jpeg" max-width="600" /></p>
<p>2018年2月，春运拉开序幕。</p>
<p>这是人类史上最大规模的迁徙活动，3.82亿人坐进车厢，被31万趟车次送往不同的目的地。如果有一台摄影机从高空对准中国大地，你会看到数千部列车在同一天内穿过山岭和水域，它们的频次经过精密计算，在安全和运力之间取得最好的平衡。</p>
<p>学生、游客、务工者，在一年的尽头，他们共用“归乡者”这个身份聚集在车站。越来越多购票机器被更便捷的“扫码进站”取代，人们点击手机屏幕，二维码悬在闸机上空一两秒，门扇开启，人流涌入。</p>
<p>从春运购票开放的那一刻起，铁道部官方购票App“12306”几乎每个瞬间都在承受巨大的流量压力。购票、选座、锁定坐席，海量的请求从每个终端汇聚成数据洪流，冲刷着部署在全国各地的核心服务器。</p>
<p>无人知晓12306为了迎接这一刻做出多少努力，也无人知晓在这个看似一成不变的App底层，已有了一个全新的框架在支撑它的高速运转。</p>
<p><strong>列车奔赴终点，蚂蚁集团mPaaS走向台前。</strong></p>
<h1><strong>城市重构者</strong></h1>
<p>1900年4月27日，着名物理学家“开尔文男爵”威廉·汤姆逊在英国皇家学会演讲时，骄傲地发出了胜利宣言：</p>
<p>“物理学大厦已经落成，接下来要做的只是一些修补工作。”</p>
<p>2016年，刚刚接任mPaaS技术负责人的祁晓龙面临着异曲同工的情况：热火朝天的移动互联网“大基建时代”已经过去，抬头只见高楼林立，低头无处可以落脚。所有人都对祁晓龙说：你要做的事一点前途都没有，根本不可能——所有的App都做完了，你们出去要怎么推这个事？</p>
<p>后来，历史走向不同的方向：开尔文男爵得意过了头，大厦上空的两朵乌云：迈克尔逊-莫雷实验和黑体辐射，最终宣告了20世纪“物理学大厦”的崩塌。</p>
<p>在祁晓龙的世界里，大厦依然崭新，但他察觉到了给高楼大厦做“修补工作”的重要性：市场上看似尽善尽美的App们正面临转型的阵痛期，有些正因跟不上时代的发展而亟待重构。凭借互联网人独有的敏锐嗅觉，他带上刚刚产品化的mPaaS，像一把快刀噼入裂缝中央。</p>            <div class="lookall-box">
<div class="lookall-shadow"></div>
<section class="lookall">
<a href="javascript:;" class="show-all" id="showMore">
<em>展开全文</em>
</a>
</section>
</div>
<div class="hidden-content control-hide">
<p>机会稍纵即逝，mPaaS没有太多准备时间。</p>
<p>“这是我们突然发现的一个timing（时间窗口），”时隔4年，祁晓龙依然能回想起当初的冒险心境，“一个非常短暂的timing。”</p>
<p class="ql-align-center"><img src="http://p8.itc.cn/images01/20200826/81bb7cffa8bc414ea0f483293e9d00f2.jpeg" max-width="600" /></p>
<p>对新生事物，人类通常习惯于保持谨慎。</p>
<p>金融行业尤其如此，业界对系统稳定性和安全性有着惊人的高要求，乃至于当我们想要描述一个最高的安全层级，通常会将其形容为“金融级”。蚂蚁集团切入了一条危机四伏的赛道，只要一着不慎，就是满盘皆输。</p>
<p><strong>mPaaS是什么？换句话说，mPaaS何德何能？</strong></p>
<p>它孕育于风云际会的2013年。</p>
<p>那是美好的一年：支付宝迎来了业务的爆发式增长，它从简单的支付工具摇身一变，成为一个集成了各类功能和应用的超级App。</p>
<p>那也是充满挑战的一年：用户数以接近指数级的速度飙升，支付宝的开发团队随之日益庞大，这必然伴随着业务模块的复杂化和开发效率的下降。</p>
<p>要解决，而且要釜底抽薪地解决这一切：从2013到2015年，针对支付宝的框架治理紧锣密鼓地展开。业务应用模块化，开发工具组件化，支付宝被改造成一个平台型App，基于其上的每一个应用都可以由一个团队独立开发，整个App统归一个通用的底层平台框架进行管理。</p>
<p><strong>如果支付宝也是一座高楼，它或许类似于业界设想中的“模块化建筑”。</strong>每个房间都能作为一个模块单元，在工厂中进行预制生产，运输到现场后通过拼插、焊接等连接方式，组装成一个完整的建筑体。</p>
<p>拼搭、装配，开箱即用，听起来好像和堆积木一样简单。</p>
<p>这套可插拔的技术框架构成了mPaaS的前身。PaaS原本是云计算技术中的概念，全称Platform-as-a-Service，“平台即服务”。mPaaS直接在PaaS前面加了一个m，代表mobile（移动）。</p>
<p>技术宅命名法，简单粗暴到了极致。</p>
<p>在云架构中，PaaS位于IaaS（设施即服务）和SaaS（软件即服务）的中间层，属于云环境中的应用基础设施服务。三者的对应关系类似于底层硬件-操作系统-应用，mPaaS扮演的角色正是一个承载应用的“研发平台”。</p>
<p>好了，神功初成，牛刀小试。如果说支付宝是一辆在高速行驶中更换引擎的跑车，mPaaS接下来要面对的任务，则无疑更加艰巨。</p>
<p><strong>它要为这城市中的高楼大厦们“伐骨洗髓”。</strong></p>
<p class="ql-align-center"><img src="http://p5.itc.cn/images01/20200826/ca56da6130da45158f77b5f618676591.jpeg" max-width="600" /></p>
<h1><strong>火种</strong></h1>
<p>2015年10月，mPaaS 1.0版本面世。</p>
<p>再过三五年，这个市场的后来者们会感叹前人眼光的毒辣：谁说“大厦已经落成”？那些看似光鲜亮丽的高楼大厦，繁华之下已显露破败和臃肿。</p>
<p>移动互联网的风暴从根基上改变了一切，原本营收占比极小的零售业务成为金融机构眼中的香饽饽。有些机构高速转身，以敏捷的步态切入C端业务；有些机构却只是煳了一层“手机银行”的皮，其内核根本无法支撑中长尾客户的需求和流量。</p>
<p><strong>市场在等待搅局者，新人在等待证明自己的契机。</strong></p>
<p>但是，正如我之前所说的，金融业是非常谨慎和保守的行业。要在几乎“零案例”的前提下靠mPaaS打动他们，谈何容易？</p>
<p>我问张亮，当时市场上的反响如何？这位mPaaS产品负责人沉吟了一会儿，最终以非常克制的态度描述了当时的情况：</p>
<p>“市场上的确有各种不同的声音。”</p>
<p>祁晓龙的回忆则更直接一些：“客户数量从10到100很容易，但是从0到10很难，非常非常难。”</p>
<p>在艰难求索的路程上，变故总会在突然间发生。<strong>例如，没有人会想到mPaaS迎来的第一个客户不是金融机构，而是12306</strong>——没错，就是那个耳熟能详的12306。</p>
<p class="ql-align-center"><img src="http://p0.itc.cn/images01/20200826/1a36d23e751145d3884aed8c8dd51feb.png" max-width="600" /></p>
<p>交通方式的制约能决定历史的走向，出行方式的变革会敲响时代的钟声。2017年，在高铁网络像毛细血管一样贯通中国大地的时候，日渐增多的旅客们发现，他们也需要一组可靠的网络工具作为配套——它必须足够高速、足够精密，在数字化浪潮中游刃有余。</p>
<p>基建和“数字基建”齐头并进，12306不断加快追赶科技创新的脚步。</p>
<p>2017年8月，mPaaS团队入驻12306办公现场。这次合作得到了当时主管金融云业务的蚂蚁集团副总裁刘伟光高度重视，他向前线将士下达命令：无论如何，以支持好12306项目为第一优先。</p>
<p>来之不易的机会，同时也是不容失误的挑战，面对这个开发周期需要1年以上的大体量App，没有人敢掉以轻心。全团队集结待命，从客户方手中接下第一个需求：<strong>先把国庆期间的出行高峰支撑住。</strong></p>
<p>这是一次互联网公司和传统软件公司开发流程的碰撞，团队在完全陌生的环境里上马开工。铁科院员工配合10多人的mPaaS团队加班加点，终于在一个月时间里完成了12306基础功能的优化。国庆黄金周来临，游客出行带来的购票高峰平稳度过。</p>
<p>团队舒了口气：还好，不辱使命。</p>
<p>客户方啧啧赞赏：<strong>不错啊，那你们把春运也支持了吧。</strong></p>
<p>我不知道驻场12306的蚂蚁集团高级无线开发工程师杨薇听到这个需求时是什么表情，但是，总之，为了应对春运可能出现的极限情况，蚂蚁金融云团队精锐尽出：研发、部署、网关、容灾……技术人员各就其位，动辄加班到凌晨两三点。春运前，12306终于在双方人马的合力改造下“脱胎换骨”：外表看来一如往常，其内核却已变成了一个全新的App。</p>
<p>“UI（用户界面）还跟原先长得一模一样，用户的操作行为是一样的。”杨薇介绍说，“但是内容全变了，客户端框架和整个前端页面全部重写了。”</p>
<p>湖面平静无波，水底暗流涌动。12月，新版12306开始有条不紊地进行外部灰度测试。作为一款自带热点的App，社交媒体上出现了一面倒的好评：大家都升级12306了吗？新版本的体验变好了！</p>
<p>评论者云集：“是的！”“同感！”</p>
<p>时针拨向2018年，我们见证了文章开头那一幕。2018年春运共计运送29.8亿人次，累计输送旅客3.82亿人，归乡的游子们点击屏幕，无形的票面凭证在数据信道中流转，数千万人回到家乡与亲人拥抱，列车冲破雨幕，引擎在晨风中轰鸣。</p>
<p>代码背后饱含悲喜，他们路途通畅，安稳无虞。</p>
<p><strong>那一年，火焰从无声处燃起，将要照彻长夜。</strong></p>
<p class="ql-align-center"><img src="http://p2.itc.cn/images01/20200826/05a85964dbe646febe4a2ced82df8694.jpeg" max-width="600" /></p>
<h1><strong>群山之巅</strong></h1>
<p>首战告捷，mPaaS奔向更险峻的山岭。</p>
<p><strong>或者说，是更多崇山峻岭选择了它。</strong>自12306为始，一众金融机构向mPaaS抛出了橄榄枝。2018年3月，刚从12306项目中抽身出来的杨薇马不停蹄转投广发银行，这是一家成立30余年的老牌股份行，同时也是mPaaS服务的首个金融行业客户。</p>
<p>作为总资产达到2.6万亿的庞然大物，广发银行面临的问题远比12306复杂：它的业务可不仅仅是购票售票，更有借贷、还款、理财、商城，众多业务模块纠缠在一起。mPaaS团队只能边拆边改，将一团乱麻的业务化为框架上可以灵活插拔的组件。</p>
<p>部署、测试、投产，蚂蚁集团员工在广发银行来来去去，为新框架的搭建扫平障碍。8月中，广发银行信用卡App“发现精彩”率先上线，手机银行App直接承继了它的部分子功能，开发进度紧随其后。</p>
<p>“这也是mPaaS平台的优势。只要是使用mPaaS开发的功能，就可以直接复用。”在教会广发银行技术团队使用mPaaS之后，杨薇终于清闲了一阵子，她只在手机银行App上线之前去看了一眼，一切运转如常。</p>
<p class="ql-align-center"><img src="http://p7.itc.cn/images01/20200826/772a63884b184770b14fd88178d1cc03.jpeg" max-width="600" /></p>
<p>《一代宗师》讲武学：<strong>过手如登山，一步一重天。</strong></p>
<p>技术何尝不是如此？登临群山，步步不敢怠慢。</p>
<p>山路险峻难行，幸好mPaaS也已今非昔比：2015年至今，mPaaS已经迭代了三个版本。从专注网关、消息推送等核心能力的mPaaS 1.0，到加入了发布平台、热修复、离线包等功能的mPaaS 2.0，工具库日臻完善。张亮形容，这时的mPaaS已经具有<strong>“颠覆传统金融机构研发模式”</strong>的潜力。</p>
<p>2017年底，mPaaS演化到3.0版本。在智能化方面的技术积淀，从App研发、发布到分析、运营的全生命周期管理，让它跳出一个单纯开发框架的领域，成为一座坚实的“移动中台”。</p>
<p>我问祁晓龙：如今的mPaaS相较于市场上其他竞品，你认为最特别、最不可替代的功能是什么？</p>
<p>他给出的答案是：<strong>小程序</strong>。</p>
<p>“对金融机构客户来说，小程序是一个非常新的概念。”祁晓龙说，许多金融机构希望做一些开放性的尝试，让更多合作伙伴入驻自身App，开辟新的流量通道。这些“外部入驻”从前是以H5页面居多，受制于呈现方式僵化、加载时间长等问题，用户的体验并不好。</p>
<p>房东急于将空屋出租，租客却苦于不得其门而入。小程序后来居上，为这些“房东”和“租客”指明了一条新的道路。</p>
<p>“mPaaS承担的一个重要职责，是用自身的技术创新带动客户的业务创新。”张亮对这个问题看得更透彻些：过去几年，银行业开始提出<strong>“开放银行”</strong>的概念，试图让银行变得无处不在——说白了，就是让银行的更多业务直接融入到场景之中。</p>
<p><strong>这是一个超前于时代的概念，没有人说得清“开放银行”的未来在哪个方向。</strong>金融机构们把目光聚焦在支付宝的“小程序生态”上，这种模式把轻量化的入口堆放在旗舰级应用上，种类繁多的功能和服务被分门别类，用户就像在巨大的母舰上凭栏四望，跃上一艘快艇，即可乘风破浪。</p>
<p>mPaaS 3.0顺势而为，将小程序能力拆分为一个纯技术方案，供客户任意调用。金融机构以小程序为载体推进自身的业务开放，第三方也能够通过小程序入驻App，进一步丰富业务场景。“这是他们愿意去探索和尝试的一个方向。”祁晓龙说。</p>
<p class="ql-align-center"><img src="http://p7.itc.cn/images01/20200826/ea54df23f6ed42d0b952af5cd918241f.jpeg" max-width="600" /></p>
<p>如今你再打开12306，会看到那个传统的静态主页不见了，取而代之的是各类入口：酒店住宿、休息厅接送、出行保险、扶贫商城……App本身构成了一个多元的中转站，越来越多相关功能被集聚在一起，不同的业务场景被打通，得以触达到更多用户。</p>
<p>用着名的“长尾理论”来诠释，这也就是那部分沉默的、一直以来被忽视的“中长尾”用户。许多金融机构埋头深耕多年，才惊觉这批数量庞大的无声者，他们长久以来不发一语，他们的价值却不容被忽视。</p>
<p>长尾遥遥垂下，指向无人涉足的空白地带。</p>
<p>那是互联网的下一个必争之地。</p>
<h1><strong>于无声处听惊雷</strong></h1>
<p>无人区，通常意味着贫瘠的荒原。</p>
<p>但蚂蚁习惯于挖地三尺，在渺无人迹的荒野上追索宝藏。在拿下头部客户的订单之余，mPaaS也试图把重构自身的能力交到更多“中长尾”客户手中。</p>
<p>来，再让我们回到2017年底。或许你还记得，那个时候的杨薇正在12306驻场，她和蚂蚁的同事、铁科院的同僚一起忙里忙外，为“保障春运”的政治任务贡献睡眠时间。</p>
<p>同一时刻，远在江苏宿迁的汪晓涛开始犯愁。</p>
<p>这个面相和善的男人是江苏民丰农村商业银行研发经理，这是一家总资产400多亿、扎根于江苏省宿迁市的农商银行。由于旗下一款名叫“宿速e”的线上贷产品开发厂家“战略转移”，江苏民丰不得不把这个项目接回到自己手中。</p>
<p>对汪晓涛来说，这是个颇有点烫手的山芋。“我们在移动开发端比较弱，只靠一个人忙不过来，如果要在每端配置两个人，人手又不够。”</p>
<p><strong>技术力量薄弱、人手短缺，这是在中小型银行广泛存在的窘境。</strong>汪晓涛正是在这样的压力下和mPaaS相遇，回想起来，他颇带点不好意思地笑笑：“早期合作的时候，mPaaS那么多大拿给我们改代码、找问题，也不像现在偶尔问一下就行了，以前我们几乎是天天问，下了班也问，到了周末还会问……”</p>
<p>在合作的过程中，江苏民丰和mPaaS团队逐渐找准配合的节奏。业务拆分、框架优化、代码精简，民丰的拳头产品“宿速e”得以改造升级，并衍生出更多新产品，向辖区内有借贷需求的客户提供线上贷款业务，3年来服务客户上万人，累计放款数十亿。</p>
<p>2018年底，江苏民丰在mPaaS的加持下彻底重构App，应用操作更加流畅，闪退率大幅降低。第二年，汪晓涛还用时下流行的“小程序”构建了一系列生态，从付款码、扫码支付功能，到生活缴费、天猫优选等新生事物，江苏民丰手机银行App在一整套流畅而高效的底层框架支持下，向着新的业务空间伸出枝桠。</p>
<p>用汪晓涛的话说，<strong>“一个非常漂亮的App”</strong>。</p>
<p>此外，mPaaS对国家监管需求的响应速度也让汪晓涛惊叹不已：国密、IPv6、隐私权限，平台几乎是同步更新，只需要做少许改造即可完成适配。</p>
<p>但是，还没完，这个男人的野心不止于此。</p>
<p>作为银行业少见的mPaaS公有云客户，汪晓涛十分渴望把这个框架推荐给江苏省农村信用社联合社，构建一套全省统一的专有云。他好几次前去游说省联社分管手机银行业务的领导，游说风格简单粗暴：你看，我们只用这么些人，做成了这么多事！</p>
<p>在汪晓涛的设想里，将来会诞生一个“航空母舰”级别的巨型App，江苏的所有下级农信社都可以把自身业务以小程序的形式投放到“母舰”上。高度集成，快速分发，这样的技术图景对一个工程师的吸引力，恐怕和一个军迷亲自登临航空母舰一样震撼。</p>
<p>“他们也想换（架构），我们也一直想他们换。”汪晓涛笑称，“这是我短期内最大的目标。”</p>
<p><strong>有时候，那些意义重大的事件往往在静默中完成。</strong>2018年，杨薇忙完了12306项目，跟随着团队向广发银行进军。这时的汪晓涛正在彻夜查找问题、重构代码，试图以技术的力量，让一家小小的农商行焕发新生。</p>
<p>钱款到账，列车开行，代码在这个世界的基底静默流动。</p>
<p>火光从大地的角落升起，沉默者开始发声。</p>
<p class="ql-align-center"><img src="http://p3.itc.cn/images01/20200826/e81b09222e534ec690113c8f756dff7d.jpeg" max-width="600" /></p>
<h1><strong>永续进化</strong></h1>
<p>我问张亮：mPaaS的“完全体”会是什么形态？</p>
<p>张亮回答：<strong>mPaaS没有完全体，它一定是不断发展和变化的。</strong>一方面，新的交互方式和开发方式带动技术的变革；另一方面，来自客户的业务需求也会倒逼产品的进化。</p>
<p>2018年，张亮作为mPaaS产品负责人接受了一次专访。他详细介绍了mPaaS提供给开发者的各项能力，并提纲挈领地总结出三个产品维度：高效开发所需的「客户端能力」，全生命周期管理的「移动中台」，延展上层能力的「后台连接」。</p>
<p>如今再回首，张亮的讲稿恐怕还得加长很多页。mPaaS在研发效能、数字化运营的方向上愈发精进，又在疫情期间响应客户“远程办公”的需求，进化出音视频相关的组件。产品形态一路演进，要说有什么唯一不变的，就是mPaaS立足于技术的更新迭代，带动金融行业乃至全行业业务创新的初心。</p>
<p>“这是我们产品层面不变的理念。”张亮说。</p>
<p><strong>有不变，也有万变，这或许是迎接未来的最佳策略。</strong>每个人都看见名为“未来”的海浪迎面奔涌，却无法描摹它的形状，也无法估测它的力量。</p>
<p>在可见的未来，新的浪潮将会冲上陆地，席卷那些曾经光鲜和强固的高楼，到时候，或许一切又要推倒重来。我问张亮，凭借钻研移动开发平台多年来积累的洞察力，对未来有没有自己的见解？</p>
<p>张亮笑了，他说，很有意思的一个问题。</p>
<p><strong>“mPaaS究竟是什么？mPaaS是致力于终端设备服务的开发框架。”</strong>这里的终端设备可以是一台手机，也可以是一种新的交互方式、一种新的设备——例如时下火热的IoT设备；它甚至有可能完全脱离设备，通过AR等近乎科幻的场景呈递给用户。</p>
<p>交互模式会改变，但为客户提供服务的需求永远不变。只要这样的需求存在，mPaaS就有安身立命的空间。在更久远的未来，mPaaS的技术理念和实现方式或许会和现在大相径庭，将来的App也一定会和如今的App走上完全不同的路线，或许我们最常用的工具不再是手机，而是智能穿戴设备、语音接收终端，甚至脑机接口、全息影像……</p>
<p>我们看不清明天的样子，但在微光映照下的轮廓已足够动人。</p>
<p>“将来我们服务C端客户的形式会多种多样化，不单单只局限于手机端的App，它可能会是VR、AR这些场景，各种各样的形态都有可能。”张亮畅想。</p>
<p>技术储备在手，祁晓龙对此也满怀信心：“我们的客户可以是广发银行、12306，但是我们真正的用户，其实是和我一样的每一个开发者。在这个行业里，没有人比我们更了解我们的用户。”</p>
<p>上海地铁、华夏银行、苏州银行、常熟农商行……越列越长的mPaaS客户名单，此刻都在同一条战线上奔赴未来。它们是焕然一新的摩天大厦，它们是蚂蚁在荒原上播下的火种。</p>
<p>而今火种壮大，火炬参天。</p>
<p class="ql-align-center"><img src="http://p3.itc.cn/images01/20200826/bf038d1028c24e1ca52bca18cd470a07.jpeg" max-width="600" /></p>
<p>20世纪，物理学大厦崩塌之后，学者们并没有太过沮丧。他们很快捡拾砖瓦，要在废墟上建造一座比从前更加稳固的高楼。</p>
<p>今天，未来的大浪挟风暴而来，mPaaS伫立在潮头凝视远方。没有人知道它的终点会停在何处，或者说，技术的旅程本来就没有终点。</p>
<p>纵览这时代的先声，在高楼之巅，在海天之外。</p>