➜手机NFC是鸡肋？网上买个蓝牙读卡器轻松搞定门禁卡
http://www.sohu.com/a/415998551_124103	58357
<p>手机的NFC到底有啥用？刷卡乘公交肯定是大家第一个想到的，也是应用最广泛的。有的人觉得出门带一张公交卡不是什么麻烦事，但是不少人随身携带的钥匙上大大小小的门禁卡，有家里智能门锁的、有小区大门的、有单位大门的，如果把这些卡都合成一张或者模拟到手机里岂不是方便多了！</p>
<p>用手机刷北京公交卡（图来源网络）</p>
<p class="ql-align-center"><img src="http://p4.itc.cn/images01/20200902/f0299ba79d4643f3ab802c39b9c4ab36.jpeg" max-width="600" /></p>
<p>现在越来越多的手机、手环都加入了NFC芯片，比如我有一台最新的华为P40 Pro手机，打开“钱包”APP后，可以看到新增了“模拟实体门禁卡”以及“创建空白卡”等功能。</p>
<p class="ql-align-center"><img src="http://p8.itc.cn/images01/20200902/677cacb94d5e4411a395011a4de867d8.jpeg" max-width="600" /></p>
<p>进小区的门禁系统</p>
<p class="ql-align-center"><img src="http://p9.itc.cn/images01/20200902/bf98df9d9dd84445a80d0c5bc3308eb4.jpeg" max-width="600" /></p>            <div class="lookall-box">
<div class="lookall-shadow"></div>
<section class="lookall">
<a href="javascript:;" class="show-all" id="showMore">
<em>展开全文</em>
</a>
</section>
</div>
<div class="hidden-content control-hide">
<p>以华为P40 Pro里的“创建空白卡”这个功能为例，原理上就是你带着手机去小区物业办公室，让物业工作人员用他们的写卡器把你们小区大门的门禁功能写入到这台手机中。</p>
<p>原理很简单，但实际操作就因人而异了。我们小区物业肯定不会同意这么干，毕竟他们一张门禁卡需要缴纳“押金”50元！美其名曰“为了业主安全”，可只要你住在这个小区，通常情况下，门禁卡也不会退掉取出押金，这50元岂不就成了他们的“固定资产”？父母孩子外出也很容易丢卡，要知道一张IC门禁卡网上批发也就5毛钱一个，不能忍啊！</p>
<p>聪明的你肯定想到了我的手机里“模拟实体门禁卡”这个功能。目前比较新的小区的门禁卡基本都是IC卡，但你实际操作就会发现手机提示“该卡为加密卡，无法模拟”。解决办法很简单，网上淘个一百多元的读卡器就可以轻松搞定了。</p>
<p>首先你得确认自己的门禁卡属于哪种类型，上图就是常见的门禁卡的种类。</p>
<p class="ql-align-center"><img src="http://p2.itc.cn/images01/20200902/c9307d58035b41f68c33929fb33253bd.jpeg" max-width="600" /></p>
<p class="ql-align-center"><img src="http://p4.itc.cn/images01/20200902/0ec88af3135d47a986680924e6c89d3f.jpeg" max-width="600" /></p>
<p>像上图我们小区车棚的门禁卡就是ID卡，属于125kHz频率，我们手机和大部分IC加密卡都是属于13.56MHz频率，对于ID卡手机和手环NFC就无能为力了。</p>
<p class="ql-align-center"><img src="http://p6.itc.cn/images01/20200902/ee6235d69d6d4d24a3c4c9247535ba75.jpeg" max-width="600" /></p>
<p>ID卡内部结构</p>
<p class="ql-align-center"><img src="http://p8.itc.cn/images01/20200902/77dca0e418ba47728662779d5857a4ac.jpeg" max-width="600" /></p>
<p class="ql-align-center"><img src="http://p7.itc.cn/images01/20200902/85618b722c1f452a978f6f18dbe62bec.jpeg" max-width="600" /></p>
<p>还有一部分外观有点像ID卡，但实际上它算是IDIC二合一卡，可以用手机NFC识别（方法很简单，只需要打开手机NFC功能，再把卡贴近NFC刷卡区域，如果手机弹出对话框就表示可以识别）。</p>
<p class="ql-align-center"><img src="http://p6.itc.cn/images01/20200902/a026086bc9c74ccd91247cd56aa4b66a.jpeg" max-width="600" /></p>
<p>至于更细分的UID 卡（普通复制卡）CUID 卡（可擦写防屏蔽卡）FUID （不可擦写防屏蔽卡）卡UFUID（高级复制卡）GTU/GUID/GDMIC卡（滚动码复制卡）等等，我也是看网上资料才知道的，这里就不详细展开了，只要知道，基本上我们大多数小区和楼宇的门禁卡都是属于UID 卡就行了。</p>
<p class="ql-align-center"><img src="http://p4.itc.cn/images01/20200902/6eb36ac27d1948a58a3787d5c7880873.jpeg" max-width="600" /></p>
<p>以网上买的这款支持手机、PC的NFC Reader Tool为例，它内置锂电池，支持BLE和SPP两种连接方式，也就可以用手机蓝牙、手机有线OTG，以及电脑USB连接，使用非常方便。随机送了好几个卡和卡贴，哪怕你是苹果手机，也可以用那个超薄的IC卡贴隐藏在手机壳里，或者贴在手机背面，秒变门禁卡。</p>
<p class="ql-align-center"><img src="http://p8.itc.cn/images01/20200902/952630c5385048c3b90a1e4fed43f27d.jpeg" max-width="600" /></p>
<p>NFC Reader Tool，其实就是一个NFC破解加密读卡器，它通过读取数据，然后把数据分析交给手机或者PC来进行解密，再进行写卡（复制）操作，非常薄，基本就是一个信用卡大小。</p>
<p class="ql-align-center"><img src="http://p2.itc.cn/images01/20200902/b022c88ce26e4375adab6c63886725f3.jpeg" max-width="600" /></p>
<p>机身底部一个充电口还有一个电源按键，可以在蓝牙和有线模式进行切换。</p>
<p><strong>PC连接方式：</strong></p>
<p class="ql-align-center"><img src="http://p1.itc.cn/images01/20200902/74bad49c97d8464c8b8fb1d96970ece9.jpeg" max-width="600" /></p>
<p>连接电脑很简单，只要连上电脑USB口就可以了，下载NFC Reader Tool这个软件，使用方法官方有教程，这里就不详细展开了。我先用自家的智能门锁的IC卡来进行测试。</p>
<p>如上图左侧的这个卡属于滴胶IC卡，在PC软件上点击一键解原卡，大概不10秒多就破解完成了，之后再把要复制的新卡（随机送的可擦写CUID卡）放上去，进行写卡，之后进行测评，我家门锁毫无悬念的被打开了……</p>
<p class="ql-align-center"><img src="http://p0.itc.cn/images01/20200902/aa91fc0e2f0840d8b13207269873abdb.jpeg" max-width="600" /></p>
<p><strong>手机连接方式：</strong></p>
<p>这里分为有线和无线方式，如果手机支持OTG，那么建议用有线连接，毕竟数据传输速度要更快。解密方式和PC一样，第一次看官方教程有点繁琐，仔细跟着操作一遍就熟悉了。</p>
<p class="ql-align-center"><img src="http://p0.itc.cn/images01/20200902/5011dde6c10e40838e6a51df1fde379a.jpeg" max-width="600" /></p>
<p>手机破解加密卡界面。</p>
<p class="ql-align-center"><img src="http://p4.itc.cn/images01/20200902/40316b4ced9a4a07b04ffcb382bb5748.jpeg" max-width="600" /></p>
<p class="ql-align-center"><img src="http://p9.itc.cn/images01/20200902/658e08ee850a4334af36ff8ef73c65b6.jpeg" max-width="600" /></p>
<p>同理，这次我把门禁卡复制到了手机上，过程依旧是解密，保存密钥，换手机门禁卡功能在读卡器上读卡，同时写卡（写到手机上），这时手机就拥有了模拟加密门禁卡的功能，从此出门不用再带各种卡了，坐公交、刷小区门卡全用手机、或者支持NFC的手环搞定，别提有多方便！</p>
<p>另外，NFC Reader Tool功能非常多，如果解码失败并显示“Card is not vulnerable to nested attack”，或者提示“当前卡片已经修复嵌套攻击漏洞”，这就是该卡修复了常规破解漏洞，还可以使用一键“云端解码”功能，提交数据由服务器解码。</p>
<p>这里来谈谈安全性，本来我感觉自己家里的3000元买的智能门锁非常安全、加密到位（品牌就不说了，官方宣传有防火墙技术），结果IC卡不到20秒就被破解了，于是第二天我就在门锁后台系统里把IC卡开锁的功能给关闭了，只保留了指纹开锁和密码开锁功能，保不齐哪天门卡丢失或者被人破解了给复制怎么办！而像一些公司的重地比如财务室、保密室、机房等，选择门禁供应商的时候还是多点预算的好，选个能及时更新漏洞、多种加密有防火墙、能防复制卡的系统很有必要。</p>
<p>最后着重提醒的是，一切涉及到储值卡（比如食堂饭卡、楼下打水的水卡）、以及保密单位的门禁卡，千万别碰！很容易被查出来不说，还涉嫌违法犯罪。而且严禁以盈利为目的，比如你自己以研究技术为幌子，给邻居或者小区其他人有偿去破解复制小区门卡，这也不可取，也是涉嫌违法的。</p>