➜iOS 14 支持「小程序」了：开发者如何看待 App Clips
https://sspai.com/post/62789	27590
<h2>前言</h2><p>我是高登，目前在开发跨平台播客应用 <a href="https://moon.fm/" target="_blank">Moon FM</a> 。iOS 14 推出了「轻 App (App Clips)」功能，让我们不需要下载和安装 App 也能使用部分功能。最近我给 Moon FM 适配了 App Clips ， 升级了 iOS 14 的话，可以在 iPhone 上 <a href="https://moon.fm/network/more" target="_blank">点击这里</a>、或者扫描下方二维码体验 Moon FM 的 App Clips。</p><figure class="image ss-img-wrapper image_resized" style="width:339px;"><img src="https://cdn.sspai.com//2020/09/18/3d17865d466bf2078837af855747d5d4.png"></figure><span class="ss-application" app-id="13950">&nbsp;</span><p>接下来，我会介绍有关 App Clips 的功能、使用方式以及优缺点，帮助你了解这项 iOS 14 新功能的特性与不足。</p><h2>什么是「轻 App」</h2><p>App Clips 和 <a href="https://sspai.com/post/52666" target="_blank">微信小程序</a> 有一些相似之处，但是也有很多不同。功能上它是 App 的一个子集，适合完成特定的任务，比如点餐、付款、单车扫码开锁等。相比 App 来说可以免去下载安装等繁琐的过程，通过扫码或者 NFC 轻触一下即可自动下载打开 App Clips ，过程顺畅。如果短时间内再次使用，还可以直接使用上次下载的版本；长时间不用，系统会自动删除，不需要花费精力管理。</p><figure class="image ss-img-wrapper image_resized" style="width:325px;"><img src="https://cdn.sspai.com//2020/09/18/0a1cc96e6f893c36f33fbccbef812680.png"><figcaption>打开「轻 App」</figcaption></figure><h2>App Clips 的触发方式</h2><p>App Clips 的触发是靠开发者在提交 App 审核的时候预先在 App Store Connect 定义好的 URL 来完成的。比如我把 <a href="https://moon.fm/network/sspai">https://moon.fm/network/sspai</a> 这个 URL 定义成对应播客节目 「 一派 · Podcast 」，App 审核完成后，只需要把这个 URL 做成二维码或者写入 NFC tag 里面就行了。</p><p>目前，App Clips 支持以下触发方式：</p><h3>二维码</h3><p>二维码对于国内用户来说不陌生了，微信、支付宝的扫码支付功能估计大多数人都用过。现在提起扫码,可能第一反应是打开微信或者支付宝扫码了。可惜的是 App Clips 的二维码，如果用微信支付宝等第三方 App 扫码后会打开一个网址，不能触发「轻 App」进行体验。我们必须使用 <strong>iOS 14系统相机 </strong>或者使用控制中心的<strong>读取二维码组件</strong>来扫码才能触发 App Clips。</p><p>这样的二维码触发机制会造成一些问题：一是大家已经习惯了使用微信或支付宝这类第三方工具来扫码了，另外系统相机不支持读取图片后识别图片里面的二维码。这样就给二维码的线上传播造成麻烦，比如你在社交平台分享了一个不错的 App Clips 二维码，别人在手机上看到后，其实是无法通过这个二维码触发 App Clips 的，因为系统相机必须要扫一下才行，他得把这个二维码在另一个设备比如电脑上打开，再用手机的系统相机来扫电脑屏幕上的二维码。</p><h3>NFC Tags</h3><p>最近几年生产的手机都配有 NFC 功能了。用 NFC 来触发的好处是，不需要去打开相机，比扫码快很多。这个比较适合线下场景，比如线下店铺进行下单收款等。</p><h3>App Clip 码</h3><p>这是扫码和 NFC 二合一的一种触发方式，不过使用的并不是二维码，应该是 Apple 特有的码, 优点是有辨识性，缺点是 Android 设备识别不了。如果是二维码的话，Android 起码可以显示一个页面。 另外到目前为止 Apple 还没有发布制作工具</p><h3>Safari App Banner</h3><p>添加 apple-itunes-app meta 标签到到 HTML 页面，并且配置一下 apple-app-site-association 文件，当用户用 iOS 的 Safari 浏览器浏览这个页面的时候，页面顶部会出现一个横幅，提示用户有 App Clips 可以用。</p><figure class="image ss-img-wrapper image_resized" style="width:379px;"><img src="https://cdn.sspai.com//2020/09/18/9168f9e10b6e5b2b79e51c581c06cea4.jpeg"></figure><p>这个横幅的左侧有一个关闭按钮，点击关闭后，再次打开页面，横幅不会再出现。如果想要横幅重新出现，需要到 Safari 设置里面清除历史记录和网站数据。</p><h3>信息</h3><p>虽然微信等三方社交软件不支持识别 App Clips，但是 iOS 系统自带的 iMessage 是支持的，当你在 iMessage 发送一个 App Clips 链接的时候，系统会自动把信息显示成一个 App Clips 的卡片。不过，目前 iOS 14 上好像还不能正确识别，可能需要等待后续系统更新。</p><figure class="image ss-img-wrapper image_resized" style="width:418px;"><img src="https://cdn.sspai.com//2020/09/18/4f37ef46eb4bf02a872d6b2b0bbec4ee.png"></figure><h3>地图</h3><p>这个方式特别适合线下店铺，是和地理位置相关联的。</p><p>从 App Clips 的触发方式可以看到，目前 App Clips 是比较适合线下店铺下单收款、共享单车开锁这类应用的。由于目前的触发方式很难通过社交网络等方式传播，线上应用场景还是比较受限制的。</p><h2>App Clips 的优点</h2><p>作为 iOS 系统级别的「小程序」我认为 App Clips 有以下优点：</p><h3>适配简单</h3><p>如果开发者已经有了一个 App，再来适配 App Clips 其实是不需要花费太多精力的，大部分 App 里面原有的代码都可以复用，只需要对原有的 App 功能进行一下裁剪，简化一下流程就行了。如果是开发一个微信小程序，开发者其实是需要另起炉灶、重新开发的。不过微信小程序相比 App Clips 也有自己的长处，就是跨平台。</p><h3>运行流畅</h3><p>一般来说大家会有这样的体验：原生开发的 App 会比微信小程序这类使用 Web 技术开发的程序运行起来更流畅。 App Clips 实际上是 App 功能的一个子集，大部分代码也都是和 App 共用的，所以相较于微信小程序，App Clips 在运行流畅度上会更胜一筹。</p><h3>轻量</h3><p>正如 App Clips 的中文名「轻 App」，App Clips 主打轻量，免去了 App 需要去 App Store 搜索和下载安装的繁琐过程。App Clips 只需扫码或者通过 NFC 轻触一下， 就会开始下载，下载完成后自动打开。</p><p>由于 Apple 要求 App Clips 大小不能超过 10MB， 所以在 4G 网络下几秒应该就能下载完。 这里说的 10 MB 大小限制指的是 Universal Variant uncompressed，实际 App Clips 使用的时候只需要下载对应机型经过压缩的文件，所以需要下载的数据其实会比 10 MB 小不少。</p><h3>功能可以很强大</h3><p>App Clips 很轻量，但是功能还是可以很强大，使用体验上其实和 App 是差不多的。如果你打开 iOS 的多任务管理就会发现，微信小程序使用的时候是局限在微信 App 里面，但是 App Clips 运行的时候和 App 一样是独立的任务。在多任务管理界面，可以像 App 一样，上滑关闭。</p><figure class="image ss-img-wrapper image_resized" style="width:308px;"><img src="https://cdn.sspai.com//2020/09/18/437a643d2e5bb870da21d1572e0d59d8.png"></figure><h2>App Clips 的限制</h2><h3>没有独立的图标</h3><p>这里有两点问题：一个是你访问过的 App Clips 在桌面上没有图标，你只能去「App 资源库」里面的最近添加分类里找，不太方便。</p><figure class="image ss-img-wrapper image_resized" style="width:347px;"><img src="https://cdn.sspai.com//2020/09/18/7ff674450d6729ac6020a11e3c1f0487.jpeg"></figure><p>另外，如果你留意到「 一派 · Podcast 」的 App Clips 截图里面的图标，应该已经发现了，App Clips 的图标实际上只是 App 图标外面加了一圈虚线，无法为「一派 · Podcast」App Clips 设置独特的图标。</p><h3><strong>不支持多平台</strong></h3><p>App Clips 只支持 iOS 平台， 微信小程序可以同时支持多个平台，如 Android、Windows。</p><h3><strong>功能上的限制</strong></h3><p>在给 Moon FM 适配 App Clips 的过程中，我也发现了一些功能上的限制，比如 App Clips 无法后台播放，很遗憾。我只能期待 Apple 后期能够开放更多的权限给 App Clips 了，关于有哪些功能 App Clips 不支持，这里有一份详细的 <a href="https://developer.apple.com/documentation/app_clips/choosing_the_right_functionality_for_your_app_clip">文档</a>。</p><h2>总结</h2><p>总的来说，App Clips 有它自己的优势，目前主要定位线下应用。但 App Clips 只支持 iOS，所以在线下 App Clips 是不可能打败微信小程序的，毕竟线下店铺不可能只服务使用 iPhone 的客户。希望 Apple 能在后期为 App Clips 的线上应用场景发力，线上才是主战场啊。</p><p>另外，虽然 App Clips 目前应用场景有限，主要是线下应用。但是如果开发者有付费 App 的话，也许可以利用 App Clips 做试用功能，补上 App Store 不能试用的短板，毕竟适配一下不需要花费太多时间。</p><p style="margin-left:0px;">&gt; 下载少数派 <a href="https://sspai.com/page/client">客户端</a>、关注 <a href="https://sspai.com/s/J71e">少数派公众号</a>，第一时间了解 iOS 14 新特性 📱</p><p style="margin-left:0px;">&gt; 实用、好用的&nbsp;<a href="https://sspai.com/mall/class/28" target="_blank">正版软件</a>，少数派为你呈现&nbsp;🚀</p><p>© 本文着作权归作者所有，并授权少数派独家使用，未经少数派许可，不得转载使用。</p>